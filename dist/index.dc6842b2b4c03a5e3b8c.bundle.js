webpackJsonp([1],{0:function(e,t,n){e.exports=n(304)},38:function(e,t){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var a={},l=0,o=function(){return Object.keys(a).length},r=function(e){var t=[];return[].concat(n(e)).map(function(e){var n=new Blob([e],{type:String(e.type)}),o=window.URL.createObjectURL(n);a[String(l)]={blob:n,objectURL:o},t.push(l),l+=1}),t},i=function(e){var t=l;return a[t]={blob:e,objectURL:window.URL.createObjectURL(e)},l+=1,t},c=function(e,t){var n=String(e);return window.URL.revokeObjectURL(a[n].objectURL),a[n]={blob:t,objectURL:window.URL.createObjectURL(t)},n},u=function(){Object.keys(a).map(function(e){window.URL.revokeObjectURL(a[e].objectURL)}),a={}},d=function(e){return a[String(e)].objectURL},s=function(e){return a[String(e)].blob},f=function(e){var t=String(e);return window.URL.revokeObjectURL(a[t].objectURL),delete a[t],t};t["default"]={importBlob:i,removeAllBlob:u,getLength:o,updateBlob:c,importFiles:r,getObjectURL:d,getBlobObject:s,removeBlob:f}},49:function(e,t,n){(function(e,t){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},a=function(){function t(a,l,o,r,u){function f(a,o){if(null===a)return null;if(0===o)return a;var h,v;if("object"!=("undefined"==typeof a?"undefined":n(a)))return a;if(a instanceof c)h=new c;else if(a instanceof d)h=new d;else if(a instanceof s)h=new s(function(e,t){a.then(function(t){e(f(t,o-1))},function(e){t(f(e,o-1))})});else if(t.__isArray(a))h=[];else if(t.__isRegExp(a))h=new RegExp(a.source,i(a)),a.lastIndex&&(h.lastIndex=a.lastIndex);else if(t.__isDate(a))h=new Date(a.getTime());else{if(g&&e.isBuffer(a))return h=new e(a.length),a.copy(h),h;a instanceof Error?h=Object.create(a):"undefined"==typeof r?(v=Object.getPrototypeOf(a),h=Object.create(v)):(h=Object.create(r),v=r)}if(l){var b=p.indexOf(a);if(b!=-1)return m[b];p.push(a),m.push(h)}if(a instanceof c)for(var y=a.keys();;){var E=y.next();if(E.done)break;var w=f(E.value,o-1),x=f(a.get(E.value),o-1);h.set(w,x)}if(a instanceof d)for(var k=a.keys();;){var E=k.next();if(E.done)break;var P=f(E.value,o-1);h.add(P)}for(var C in a){var _;v&&(_=Object.getOwnPropertyDescriptor(v,C)),_&&null==_.set||(h[C]=f(a[C],o-1))}if(Object.getOwnPropertySymbols)for(var O=Object.getOwnPropertySymbols(a),C=0;C<O.length;C++){var N=O[C],S=Object.getOwnPropertyDescriptor(a,N);(!S||S.enumerable||u)&&(h[N]=f(a[N],o-1),S.enumerable||Object.defineProperty(h,N,{enumerable:!1}))}if(u)for(var I=Object.getOwnPropertyNames(a),C=0;C<I.length;C++){var T=I[C],S=Object.getOwnPropertyDescriptor(a,T);S&&S.enumerable||(h[T]=f(a[T],o-1),Object.defineProperty(h,T,{enumerable:!1}))}return h}"object"===("undefined"==typeof l?"undefined":n(l))&&(o=l.depth,r=l.prototype,u=l.includeNonEnumerable,l=l.circular);var p=[],m=[],g="undefined"!=typeof e;return"undefined"==typeof l&&(l=!0),"undefined"==typeof o&&(o=1/0),f(a,o)}function a(e){return Object.prototype.toString.call(e)}function l(e){return"object"===("undefined"==typeof e?"undefined":n(e))&&"[object Date]"===a(e)}function o(e){return"object"===("undefined"==typeof e?"undefined":n(e))&&"[object Array]"===a(e)}function r(e){return"object"===("undefined"==typeof e?"undefined":n(e))&&"[object RegExp]"===a(e)}function i(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}var c;try{c=Map}catch(u){c=function(){}}var d;try{d=Set}catch(u){d=function(){}}var s;try{s=Promise}catch(u){s=function(){}}return t.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},t.__objToStr=a,t.__isDate=l,t.__isArray=o,t.__isRegExp=r,t.__getRegExpFlags=i,t}();"object"===n(t)&&t.exports&&(t.exports=a)}).call(t,n(16).Buffer,n(283)(e))},77:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Icon=t.Button=t.Row=void 0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o=n(15),r=a(o),i=function(e){var t=e.color,n=e.size,a=e["float"],o=Boolean(e.disabled),i=Boolean(e.active),c="btn",u={};return c+=t?" btn-"+t:"",c+=n?" btn-"+n:"",c+=a?" float-"+a:"",c+=i?" active":"",Object.keys(e).map(function(t){"color"!==t&&"size"!==t&&"float"!==t&&"active"!==t&&"disabled"!==t&&(u[t]=e[t])}),o===!0&&(u.disabled=!0),r["default"].createElement("button",l({className:c},u))},c=function(e){var t=e.fw,n=e.name,a="fa fa-"+n;return a=Boolean(t)?a+" fa-fw":a+"",r["default"].createElement("span",{className:a})},u=function(e){return r["default"].createElement("div",l({className:"row"},e))};t.Row=u,t.Button=i,t.Icon=c},78:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function l(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.undoable=void 0;var o=n(49),r=a(o),i=n(148),c=a(i),u=n(38),d=a(u),s=10,f=function(e){var t={past:[],present:e(void 0,{}),future:[]};return function(n,a){var o=n.past,i=void 0===o?t.past:o,u=n.present,f=void 0===u?t.present:u,p=n.future,m=void 0===p?t.future:p,g={past:i,present:f,future:m};if("RESET"===a.type)return d["default"].removeAllBlob(),(0,r["default"])(t);if("UNDO"===a.type){if(0===i.length)return g;var h=i[i.length-1],v=i.slice(0,i.length-1),b=m.length===s?[].concat(l(m.slice(1)),[f]):[].concat(l(m),[f]);return(0,r["default"])({past:v,present:h,future:b})}if("REDO"===a.type){if(0===m.length)return g;var y=m.pop(),E=[].concat(l(i),[f]);return(0,r["default"])({past:E,present:y,future:m})}var w=e(f,a);if((0,c["default"])(w,f,{strict:!0}))return g;var x=[].concat(l(i),[(0,r["default"])(f)]);return x=x.length>s?x.slice(1):x,{past:x,present:w,future:[]}}},p=function(e,t){return function(){var n=arguments.length<=0||void 0===arguments[0]?e:arguments[0],a=arguments[1];return a.type in t?t[a.type]((0,r["default"])(n),a):n}};t.undoable=f,t["default"]=p},146:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ActionType=void 0;var l=n(39),o=(a(l),{SAVE_GLOBAL_SETTING:"SAVE_GLOBAL_SETTING",SAVE_CONTENTS_SETTING:"SAVE_CONTENTS_SETTING",RESET:"RESET"}),r=function(e,t,n,a){return{type:o.SAVE_GLOBAL_SETTING,title:e,creator:t,subject:n,language:a}},i=function(e){return{type:o.SAVE_CONTENTS_SETTING,data:e}},c=function(){return{type:o.RESET}};t.ActionType=o,t["default"]={saveGlobalSetting:r,saveContentsSetting:i,reset:c}},147:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ActionType=void 0;var l=n(39),o=(a(l),n(38)),r=a(o),i={IMPORT_PAGES:"IMPORT_PAGES",SAVE_VIEWPORT_SETTING:"SAVE_VIEWPORT_SETTING",SET_COVER_PAGE:"SET_COVER_PAGE",MOVE_TO_NEXT_PAGE:"MOVE_TO_NEXT_PAGE",MOVE_TO_PREVIOUS_PAGE:"MOVE_TO_PREVIOUS_PAGE",CHANGE_PAGE_INDEX:"CHANGE_PAGE_INDEX",REMOVE_PAGE:"REMOVE_PAGE",ADD_BLANK_PAGE:"ADD_BLANK_PAGE",CUT_PAGE:"CUT_PAGE",CHANGE_IMAGE_POSITION:"CHANGE_IMAGE_POSITION",CHANGE_PAGE_BACKGROUND_COLOR:"CHANGE_PAGE_BACKGROUND_COLOR"},c=function(e){return function(t){return{type:e,index:t}}},u=function(e){var t=r["default"].importFiles(e);return{type:i.IMPORT_PAGES,newFileIndexList:t}},d=function(e){return{type:i.SAVE_VIEWPORT_SETTING,data:e}},s=c(i.REMOVE_PAGE),f=c(i.SET_COVER_PAGE),p=c(i.MOVE_TO_NEXT_PAGE),m=c(i.MOVE_TO_PREVIOUS_PAGE),g=function(e,t){return{type:i.CHANGE_PAGE_INDEX,originIndex:e,newIndex:t}},h=function(e){return function(t,n){var a=n().present.pageInfo.list[e],l=r["default"].getBlobObject(a).type,o=new Image,c=document.createElement("canvas"),u=c.getContext("2d"),d=[];new Promise(function(e){o.onload=e}).then(function(e){return c.width=o.width>>1,c.height=o.height,u.drawImage(o,0,0),new Promise(function(e){c.toBlob(function(t){d.push(t),e()},l)})}).then(function(){return u.drawImage(o,0-c.width,0),new Promise(function(e){c.toBlob(function(t){d.push(t),e()},l)})}).then(function(){var n=r["default"].importBlob(d[0]),a=r["default"].importBlob(d[1]);t({type:i.CUT_PAGE,index:e,blobIndex:[n,a]})}),o.src=r["default"].getObjectURL(a)}},v=function(e){return function(t){var n=document.createElement("canvas"),a=n.getContext("2d");n.width=1,n.height=1,a.fillStyle="#fff",a.fillRect(0,0,1,1),a.beginPath(),n.toBlob(function(n){var a=r["default"].importBlob(n);t({type:i.ADD_BLANK_PAGE,index:e,newBlobIndex:a})},"image/png")}},b=function(e){return{type:i.CHANGE_IMAGE_POSITION,position:e}},y=function(e){return{type:i.CHANGE_PAGE_BACKGROUND_COLOR,color:e}};t.ActionType=i,t["default"]={importPages:u,addBlankPage:v,setCover:f,moveToNextPage:p,moveToPreviousPage:m,changePageIndex:g,cutPage:h,removePage:s,saveViewportSetting:d,changeImagePosition:b,changeBackgroundColor:y}},148:function(e,t,n){"use strict";function a(e){return null===e||void 0===e}function l(e){return!(!e||"object"!==("undefined"==typeof e?"undefined":r(e))||"number"!=typeof e.length)&&("function"==typeof e.copy&&"function"==typeof e.slice&&!(e.length>0&&"number"!=typeof e[0]))}function o(e,t,n){var o,s;if(a(e)||a(t))return!1;if(e.prototype!==t.prototype)return!1;if(u(e))return!!u(t)&&(e=i.call(e),t=i.call(t),d(e,t,n));if(l(e)){if(!l(t))return!1;if(e.length!==t.length)return!1;for(o=0;o<e.length;o++)if(e[o]!==t[o])return!1;return!0}try{var f=c(e),p=c(t)}catch(m){return!1}if(f.length!=p.length)return!1;for(f.sort(),p.sort(),o=f.length-1;o>=0;o--)if(f[o]!=p[o])return!1;for(o=f.length-1;o>=0;o--)if(s=f[o],!d(e[s],t[s],n))return!1;return("undefined"==typeof e?"undefined":r(e))===("undefined"==typeof t?"undefined":r(t))}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},i=Array.prototype.slice,c=n(150),u=n(149),d=e.exports=function(e,t,n){return n||(n={}),e===t||(e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():!e||!t||"object"!=("undefined"==typeof e?"undefined":r(e))&&"object"!=("undefined"==typeof t?"undefined":r(t))?n.strict?e===t:e==t:o(e,t,n))}},149:function(e,t){"use strict";function n(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function a(e){return e&&"object"==("undefined"==typeof e?"undefined":l(e))&&"number"==typeof e.length&&Object.prototype.hasOwnProperty.call(e,"callee")&&!Object.prototype.propertyIsEnumerable.call(e,"callee")||!1}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},o="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();t=e.exports=o?n:a,t.supported=n,t.unsupported=a},150:function(e,t){"use strict";function n(e){var t=[];for(var n in e)t.push(n);return t}t=e.exports="function"==typeof Object.keys?Object.keys:n,t.shim=n},283:function(e,t){"use strict";e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},297:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(146),o=a(l),r=n(147),i=a(r),c=n(298),u=a(c);t["default"]={mangaInfo:o["default"],pageInfo:i["default"],undo:u["default"]}},298:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={UNDO:"UNDO",REDO:"REDO"},a=function(){return{type:n.UNDO}},l=function(){return{type:n.REDO}};t.ActionType=n,t["default"]={undo:a,redo:l}},299:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.EditContentPanel=t.ContentItem=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=n(15),d=a(u),s=n(49),f=a(s),p=n(77),m=function(e){return d["default"].createElement("li",{className:"list-group-item"},d["default"].createElement("div",{className:"row",style:{flexGrow:1}},d["default"].createElement("div",{className:"col"},d["default"].createElement("input",{"data-type":"text","data-index":e.index,value:e.text,type:"text",className:"form-control input-sm",placeholder:"title",onChange:e.handleBlurInput})),d["default"].createElement("div",{className:"col"},d["default"].createElement("input",{"data-type":"refindex","data-index":e.index,value:e.refindex,type:"number",min:"1",className:"form-control input-sm",placeholder:"page number",onChange:e.handleBlurInput})),d["default"].createElement("div",{className:"col",style:{display:"flex",justifyContent:"flex-end"}},d["default"].createElement("div",{className:"btn-toolbar"},d["default"].createElement("div",{className:"btn-group"},d["default"].createElement(p.Button,{color:"secondary","data-index":e.index,onClick:e.handleClickPlusButton},d["default"].createElement(p.Icon,{name:"plus"})),d["default"].createElement(p.Button,{color:"secondary","data-index":e.index,onClick:e.handleClickMinusButton},d["default"].createElement(p.Icon,{name:"minus"})),d["default"].createElement(p.Button,{color:"secondary","data-index":e.index,onClick:e.handleClickUpButton},d["default"].createElement(p.Icon,{name:"angle-up"})),d["default"].createElement(p.Button,{color:"secondary","data-index":e.index,onClick:e.handleClickDownButton},d["default"].createElement(p.Icon,{name:"angle-down"})))))))},g=function(e){function t(e){l(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.handleBlurInput=n.handleBlurInput.bind(n),n.handleClickUpButton=n.handleClickUpButton.bind(n),n.handleClickDownButton=n.handleClickDownButton.bind(n),n.handleClickPlusButton=n.handleClickPlusButton.bind(n),n.handleClickMinusButton=n.handleClickMinusButton.bind(n),n.handleClickSaveButton=n.handleClickSaveButton.bind(n),n.state={contents:(0,f["default"])(e.contents)},n}return r(t,e),c(t,[{key:"render",value:function(){var e=this;return d["default"].createElement(p.Row,null,d["default"].createElement("div",{className:"col-8"},d["default"].createElement("div",{className:"card"},d["default"].createElement("div",{className:"card-header"},"Content"),d["default"].createElement("ul",{className:"list-group list-group-flush"},this.state.contents.map(function(t,n){return d["default"].createElement(m,i({key:"ci"+n,index:n,handleBlurInput:e.handleBlurInput,handleClickUpButton:e.handleClickUpButton,handleClickDownButton:e.handleClickDownButton,handleClickPlusButton:e.handleClickPlusButton,handleClickMinusButton:e.handleClickMinusButton},t))})),d["default"].createElement("div",{className:"card-footer"},d["default"].createElement(p.Button,{color:"primary",onClick:this.handleClickSaveButton},"Save")))))}},{key:"handleBlurInput",value:function(e){var t=e.currentTarget.dataset.type,n=e.currentTarget.dataset.index,a=(0,f["default"])(this.state.contents);a[n][t]=e.currentTarget.value,this.setState({contents:a})}},{key:"handleClickUpButton",value:function(e){var t=Number(e.currentTarget.dataset.index);if(0!==t){var n=(0,f["default"])(this.state.contents),a=i({},n[t]),l=i({},n[t-1]);n.splice(t-1,2,a,l),this.setState({contents:n})}}},{key:"handleClickDownButton",value:function(e){var t=Number(e.currentTarget.dataset.index),n=(0,f["default"])(this.state.contents);if(t+1!==n.length){var a=i({},n[t]),l=i({},n[t+1]);n.splice(t,2,l,a),this.setState({contents:n})}}},{key:"handleClickPlusButton",value:function(e){var t=Number(e.currentTarget.dataset.index),n=(0,f["default"])(this.state.contents),a=i({},n[t]);n.splice(t,1,a,{refindex:"",text:""}),this.setState({contents:n})}},{key:"handleClickMinusButton",value:function(e){var t=Number(e.currentTarget.dataset.index),n=(0,f["default"])(this.state.contents);n.splice(t,1),this.setState({contents:n})}},{key:"handleClickSaveButton",value:function(){this.props.handleClickSaveButton(this.state.contents)}}]),t}(u.Component);t.ContentItem=m,t.EditContentPanel=g},300:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function l(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),d=n(15),s=a(d),f=n(77),p=n(303),m=a(p),g=function(e){function t(e){o(this,t);var n=r(this,Object.getPrototypeOf(t).call(this,e));return n.state={firstUpload:!0,generating:!1},n.handleClickUploadButton=n.handleClickUploadButton.bind(n),n.handleClickGenerateButton=n.handleClickGenerateButton.bind(n),n.handleClickAddBlankPage=n.handleClickAddBlankPage.bind(n),n.handleClickUndoButton=n.handleClickUndoButton.bind(n),n.handleClickRedoButton=n.handleClickRedoButton.bind(n),n}return i(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=this.state,n=e.State,a=n.redoable,l=n.undoable;return s["default"].createElement(f.Row,null,s["default"].createElement("div",{className:"col"},s["default"].createElement("div",{className:"card card-default"},s["default"].createElement("div",{className:"card-block"},s["default"].createElement("div",{className:"card-text",style:{cursor:"default"}},s["default"].createElement(f.Button,{color:"primary",onClick:this.handleClickUploadButton,title:"update images"},s["default"].createElement(f.Icon,{name:"upload",fw:"true"}))," ",s["default"].createElement("div",{className:"btn-toolbar",style:{display:"inline-block"}},s["default"].createElement("div",{className:"btn-group"},s["default"].createElement(f.Button,c({color:"secondary",title:"edit book info"},t.firstUpload?{disabled:"true"}:{onClick:e.handleToggleGlobalInfoPanel}),s["default"].createElement(f.Icon,{name:"edit",fw:"true"})),s["default"].createElement(f.Button,c({color:"secondary",title:"add blank page"},t.firstUpload?{disabled:"true"}:{onClick:this.handleClickAddBlankPage}),s["default"].createElement(f.Icon,{name:"square-o",fw:"true"})),s["default"].createElement(f.Button,c({color:"secondary",title:"edit contents"},t.firstUpload?{disabled:"true"}:{onClick:e.handleToggleContentsPanel}),s["default"].createElement(f.Icon,{name:"list-ul",fw:"true"})),s["default"].createElement(f.Button,c({color:"secondary",title:"edit view setting"},t.firstUpload?{disabled:"true"}:{onClick:e.handleToggleViewportPanel}),s["default"].createElement(f.Icon,{name:"eye",fw:"true"}))))," ",s["default"].createElement("div",{className:"btn-toolbar",style:{display:"inline-block"}},s["default"].createElement("div",{className:"btn-group"},s["default"].createElement(f.Button,c({color:"secondary",title:"undo"},t.firstUpload||!l?{disabled:"true"}:{onClick:this.handleClickUndoButton}),s["default"].createElement(f.Icon,{fw:"true",name:"undo"})),s["default"].createElement(f.Button,c({color:"secondary",title:"redo"},t.firstUpload||!a?{disabled:"true"}:{onClick:this.handleClickRedoButton}),s["default"].createElement(f.Icon,{fw:"true",name:"rotate-right"}))))," ",s["default"].createElement(f.Button,c({color:"secondary",title:"reset"},t.firstUpload?{disabled:"true"}:{onClick:e.Action.reset}),s["default"].createElement(f.Icon,{name:"circle"})),t.generating?s["default"].createElement(f.Button,{color:"secondary","float":"right",disabled:"true"},s["default"].createElement("span",{className:"fa fa-spinner fa-pulse"})):s["default"].createElement(f.Button,{color:"success","float":"right",onClick:this.handleClickGenerateButton},s["default"].createElement(f.Icon,{name:"download",fw:"true"})))))))}},{key:"handleClickUploadButton",value:function(){var e=document.createElement("input"),t="image/jpeg,image/png",n=this.props.Action,a=this;e.type="file",e.multiple="multiple",e.accept=t,e.onchange=function(e){var o=[].concat(l(this.files)).filter(function(e){return t.indexOf(e.type)>-1});o.length&&(n.importPages(o),a.state.firstUpload&&a.setState({firstUpload:!1}))},e.click()}},{key:"handleClickGenerateButton",value:function(){var e=this;this.props.Action;new Promise(function(t){return e.setState({generating:!0},t)}).then(function(){return(0,m["default"])(e.props.State)}).then(function(){e.setState({generating:!1})})}},{key:"handleClickAddBlankPage",value:function(){var e=Number(prompt("index: (number only)"));!isNaN(e)&&e>0&&this.props.Action.addBlankPage(e-1)}},{key:"handleClickUndoButton",value:function(){var e=this.props;e.handleHideAllPanel(),e.Action.undo()}},{key:"handleClickRedoButton",value:function(){var e=this.props;e.handleHideAllPanel(),e.Action.redo()}}]),t}(d.Component);t["default"]=g},301:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=n(15),d=a(u),s=n(55),f=n(33),p=n(49),m=(a(p),n(297)),g=a(m),h=n(38),v=a(h),b=n(77),y=n(299),E=n(300),w=a(E),x=function(e){function t(e){l(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.handleClickSetCover=n.handleClickSetCover.bind(n),n.handleClickRemovePage=n.handleClickRemovePage.bind(n),n.handleClickMoveToNextPage=n.handleClickMoveToNextPage.bind(n),n.handleClickMoveToPreviousPage=n.handleClickMoveToPreviousPage.bind(n),n.handleClickChangePangeIndex=n.handleClickChangePangeIndex.bind(n),n.handleClickCutPage=n.handleClickCutPage.bind(n),n}return r(t,e),c(t,[{key:"render",value:function(){var e=this.props;return d["default"].createElement("div",{className:"card",style:{marginTop:20,background:"#f6f6f6"}},d["default"].createElement("img",{src:e.src,style:{alignSelf:"center"},className:"card-img-top",height:"210",width:"140"}),d["default"].createElement("div",{className:"card-block",style:{borderTop:"1px solid rgba(0,0,0,.125)",background:"#fff"}},d["default"].createElement("div",{className:"btn-toolbar"},d["default"].createElement("div",{className:"btn-group"},d["default"].createElement(b.Button,i({color:"secondary",size:"sm"},0===e.index?{disabled:"true"}:{onClick:this.handleClickSetCover}),d["default"].createElement(b.Icon,{name:"book"})),d["default"].createElement(b.Button,{color:"secondary",size:"sm",onClick:this.handleClickCutPage},d["default"].createElement(b.Icon,{name:"cut"})),d["default"].createElement(b.Button,{color:"secondary",size:"sm",onClick:this.handleClickRemovePage},d["default"].createElement(b.Icon,{name:"times"})))," ",d["default"].createElement("div",{className:"btn-group"},d["default"].createElement(b.Button,i({color:"secondary",size:"sm"},0===e.index?{disabled:"true"}:{onClick:this.handleClickMoveToPreviousPage}),d["default"].createElement(b.Icon,{name:"angle-left"})),d["default"].createElement(b.Button,{color:"secondary",size:"sm",onClick:this.handleClickMoveToNextPage},d["default"].createElement(b.Icon,{name:"angle-right"}))))),d["default"].createElement("div",{className:"card-footer text-center",onClick:this.handleClickChangePangeIndex},d["default"].createElement("div",{className:"card-text text-muted",style:{cursor:"default"}},0===e.index?"Cover":e.index+1)))}},{key:"handleClickSetCover",value:function(){var e=this.props,t=e.Action,n=e.index;t.setCover(n)}},{key:"handleClickRemovePage",value:function(){var e=this.props,t=e.Action,n=e.index;t.removePage(n)}},{key:"handleClickMoveToNextPage",value:function(){var e=this.props,t=e.Action,n=e.index;t.moveToNextPage(n)}},{key:"handleClickMoveToPreviousPage",value:function(){var e=this.props,t=e.Action,n=e.index;t.moveToPreviousPage(n)}},{key:"handleClickCutPage",value:function(){var e=this.props,t=e.Action,n=e.index;t.cutPage(n)}},{key:"handleClickChangePangeIndex",value:function(){var e=this.props,t=e.Action,n=e.index,a=Number(prompt("New Index (number only) :"));!isNaN(a)&&a>0&&t.changePageIndex(n,a-1)}}]),t}(u.Component),k=function(e){function t(e){l(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.handleClickSaveButton=n.handleClickSaveButton.bind(n),n}return r(t,e),c(t,[{key:"render",value:function(){var e=this.props;return d["default"].createElement(b.Row,null,d["default"].createElement("div",{className:"col"},d["default"].createElement("div",{className:"card"},d["default"].createElement("div",{className:"card-header"},"Book Info"),d["default"].createElement("div",{className:"card-block"},d["default"].createElement(b.Row,null,d["default"].createElement("div",{className:"col"},d["default"].createElement("div",{className:"form-group row"},d["default"].createElement("label",{className:"col-2 col-form-label"},"Title"),d["default"].createElement("div",{className:"col-10"},d["default"].createElement("input",{defaultValue:e.title,ref:"g_title",className:"form-control",type:"text"})))),d["default"].createElement("div",{className:"col"},d["default"].createElement("div",{className:"form-group row"},d["default"].createElement("label",{className:"col-2 col-form-label"},"Creator"),d["default"].createElement("div",{className:"col-10"},d["default"].createElement("input",{defaultValue:e.creator,ref:"g_creator",className:"form-control",type:"text"}))))),d["default"].createElement("p",null),d["default"].createElement(b.Row,null,d["default"].createElement("div",{className:"col"},d["default"].createElement("div",{className:"form-group row"},d["default"].createElement("label",{className:"col-2 col-form-label"},"Subject"),d["default"].createElement("div",{className:"col-10"},d["default"].createElement("input",{defaultValue:e.subject,ref:"g_subject",list:"datalist_subject",className:"form-control",type:"text"}),d["default"].createElement("datalist",{id:"datalist_subject"},d["default"].createElement("option",{value:"少年"}),d["default"].createElement("option",{value:"靑年"}),d["default"].createElement("option",{value:"同人誌"}),d["default"].createElement("option",{value:"漫画"}),d["default"].createElement("option",{value:"成年コミック"}))))),d["default"].createElement("div",{className:"col"},d["default"].createElement("div",{className:"form-group row"},d["default"].createElement("label",{className:"col-2 col-form-label"},"Language"),d["default"].createElement("div",{className:"col-10"},d["default"].createElement("input",{defaultValue:e.language,ref:"g_language",list:"datalist_language",className:"form-control",type:"text"}),d["default"].createElement("datalist",{id:"datalist_language"},d["default"].createElement("option",{value:"ja"}),d["default"].createElement("option",{value:"zh-CN"}),d["default"].createElement("option",{value:"en-US"}))))))),d["default"].createElement("div",{className:"card-footer"},d["default"].createElement(b.Button,{color:"primary",onClick:this.handleClickSaveButton},"Save")))))}},{key:"handleClickSaveButton",value:function(){var e=this.refs.g_title.value,t=this.refs.g_creator.value,n=this.refs.g_subject.value,a=this.refs.g_language.value;this.props.handleSaveGlobalInfo({title:e,creator:t,subject:n,language:a})}}]),t}(u.Component),P=function(e){function t(e){l(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.handleClickSaveButton=n.handleClickSaveButton.bind(n),n.handleSetPosition=n.handleSetPosition.bind(n),n.handleSetBackgroundColor=n.handleSetBackgroundColor.bind(n),n.state={position:e.position,color:e.backgroundColor},n}return r(t,e),c(t,[{key:"render",value:function(){var e=this.state,t=e.position,n=e.color;return d["default"].createElement(b.Row,null,d["default"].createElement("div",{className:"col"},d["default"].createElement("div",{className:"card"},d["default"].createElement("div",{className:"card-header"},"viewport"),d["default"].createElement("div",{className:"card-block"},d["default"].createElement(b.Row,null,d["default"].createElement("div",{className:"col"},d["default"].createElement("div",{className:"form-group row"},d["default"].createElement("label",{className:"col-2 col-form-label"},"Width (px)"),d["default"].createElement("div",{className:"col-10"},d["default"].createElement("input",{ref:"g_width",defaultValue:this.props.width,className:"form-control",type:"number"})))),d["default"].createElement("div",{className:"col"},d["default"].createElement("div",{className:"form-group row"},d["default"].createElement("label",{className:"col-2 col-form-label"},"Height (px)"),d["default"].createElement("div",{className:"col-10"},d["default"].createElement("input",{ref:"g_height",defaultValue:this.props.height,className:"form-control",type:"number"}))))),d["default"].createElement("p",null),d["default"].createElement(b.Row,null,d["default"].createElement("div",{className:"col-8"},d["default"].createElement("div",{className:"card-group"},d["default"].createElement("div",{className:"card "},d["default"].createElement("img",{src:"images/exp4.png",height:"100",style:{width:"100%"},className:"card-img-top viewport-img"}),d["default"].createElement("div",{className:"card-footer text-center text-muted"},d["default"].createElement(b.Button,{color:"stretch"===t?"info":"secondary",onClick:this.handleSetPosition,size:"sm","data-position":"stretch"},"Stretch"))),d["default"].createElement("div",{className:"card"},d["default"].createElement("img",{src:"images/exp1.png",height:"100",style:{width:"100%"},className:"card-img-top viewport-img"}),d["default"].createElement("div",{className:"card-footer text-center text-muted"
},d["default"].createElement(b.Button,{color:"fill"===t?"info":"secondary",onClick:this.handleSetPosition,size:"sm","data-position":"fill"},"Fill"))),d["default"].createElement("div",{className:"card"},d["default"].createElement("img",{src:"images/exp2.png",height:"100",style:{width:"100%"},className:"card-img-top viewport-img"}),d["default"].createElement("div",{className:"card-footer text-center text-muted"},d["default"].createElement(b.Button,{color:"fit"===t?"info":"secondary",onClick:this.handleSetPosition,size:"sm","data-position":"fit"},"Fit"))),d["default"].createElement("div",{className:"card"},d["default"].createElement("img",{src:"images/exp3.png",height:"100",style:{width:"100%"},className:"card-img-top viewport-img"}),d["default"].createElement("div",{className:"card-footer text-center text-muted"},d["default"].createElement(b.Button,{color:"center"===t?"info":"secondary",onClick:this.handleSetPosition,size:"sm","data-position":"center"},"Center"))))),d["default"].createElement("div",{className:"col-4"},d["default"].createElement("div",{className:"card-group"},d["default"].createElement("div",{className:"card"},d["default"].createElement("img",{src:"images/exp5.png",height:"100",style:{width:"100%"},className:"card-img-top viewport-img"}),d["default"].createElement("div",{className:"card-footer text-center text-muted"},d["default"].createElement(b.Button,{color:"black"===n?"info":"secondary",onClick:this.handleSetBackgroundColor,size:"sm","data-color":"black"},"Black"))),d["default"].createElement("div",{className:"card"},d["default"].createElement("img",{src:"images/exp3.png",height:"100",style:{width:"100%"},className:"card-img-top viewport-img"}),d["default"].createElement("div",{className:"card-footer text-center text-muted"},d["default"].createElement(b.Button,{color:"white"===n?"info":"secondary",onClick:this.handleSetBackgroundColor,size:"sm","data-color":"white"},"White"))))))),d["default"].createElement("div",{className:"card-footer"},d["default"].createElement(b.Button,{color:"primary",onClick:this.handleClickSaveButton},"Save")))))}},{key:"handleClickSaveButton",value:function(){var e=Number(this.refs.g_height.value),t=Number(this.refs.g_width.value);this.props.handleSaveViewportInfo({height:e,width:t,position:this.state.position,backgroundColor:this.state.color})}},{key:"handleSetPosition",value:function(e){var t=e.currentTarget.dataset.position;this.setState({position:t})}},{key:"handleSetBackgroundColor",value:function(e){var t=e.currentTarget.dataset.color;this.setState({color:t})}}]),t}(u.Component),C=function(e){function t(e){l(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.state={showBookInfoPanel:!1,showViewportPanel:!1,showContentsPanel:!1},n.handleToggleGlobalInfoPanel=n.handleToggleGlobalInfoPanel.bind(n),n.handleSaveGlobalInfo=n.handleSaveGlobalInfo.bind(n),n.handleToggleViewportPanel=n.handleToggleViewportPanel.bind(n),n.handleSaveViewportInfo=n.handleSaveViewportInfo.bind(n),n.handleToggleContentsPanel=n.handleToggleContentsPanel.bind(n),n.handleSaveContentsInfo=n.handleSaveContentsInfo.bind(n),n.handleHideAllPanel=n.handleHideAllPanel.bind(n),n}return r(t,e),c(t,[{key:"render",value:function(){var e=this.props,t=e.Action,n=e.State,a=Math.ceil(n.pageInfo.list.length/5),l=5-n.pageInfo.list.length%5,o=0,r=[],c=[],u=n.pageInfo.list.length-1;return l=5===l?0:l,n.pageInfo.list.map(function(e,n){if(c.push(d["default"].createElement(x,{key:a+"-"+o,src:v["default"].getObjectURL(e),index:n,Action:t})),n===u)for(o=4;l-- >0;)c.push(d["default"].createElement("div",{style:{marginTop:20},className:"card",key:"blank-"+l}));o<4?o++:(r.push(d["default"].createElement(b.Row,{key:"row-"+a},d["default"].createElement("div",{className:"col"},d["default"].createElement("div",{className:"card-group"},c)))),c=[],a--,o=0)}),d["default"].createElement("div",null,d["default"].createElement("nav",{className:"navbar navbar-light bg-faded"},d["default"].createElement("h3",{className:"navbar-brand",href:""},"Epub Manga Creator  ",d["default"].createElement("iframe",{style:{border:"none"},src:"https://ghbtns.com/github-btn.html?user=wing-kai&repo=epub-manga-creator&type=star&count=true",frameBorder:"0",scrolling:"0",width:"170px",height:"20px"}))),d["default"].createElement("p",null),d["default"].createElement("div",{className:"container"},d["default"].createElement(w["default"],{Action:t,State:n,handleToggleGlobalInfoPanel:this.handleToggleGlobalInfoPanel,handleToggleViewportPanel:this.handleToggleViewportPanel,handleToggleContentsPanel:this.handleToggleContentsPanel,handleHideAllPanel:this.handleHideAllPanel}),d["default"].createElement("p",null),this.state.showBookInfoPanel?[d["default"].createElement(k,i({key:"EditBookInfoPanel",handleSaveGlobalInfo:this.handleSaveGlobalInfo},n.mangaInfo.global)),d["default"].createElement("p",{key:"p"})]:void 0,this.state.showContentsPanel?[d["default"].createElement(y.EditContentPanel,{key:"EditContentPanel",contents:n.mangaInfo.contents,handleClickSaveButton:this.handleSaveContentsInfo}),d["default"].createElement("p",{key:"p"})]:void 0,this.state.showViewportPanel?[d["default"].createElement(P,i({key:"EditViewportPanel",handleSaveViewportInfo:this.handleSaveViewportInfo},n.pageInfo.viewport)),d["default"].createElement("p",{key:"p"})]:void 0,d["default"].createElement(b.Row,null,d["default"].createElement("div",{className:"col"},d["default"].createElement("div",{className:"card card-default"},d["default"].createElement("div",{className:"card-header"},"Pages"),d["default"].createElement("div",{className:"card-block",style:{paddingTop:0}},r)))),d["default"].createElement("p",null),d["default"].createElement("p",null," ")))}},{key:"handleToggleGlobalInfoPanel",value:function(){this.setState({showBookInfoPanel:!this.state.showBookInfoPanel,showViewportPanel:!1,showContentsPanel:!1})}},{key:"handleToggleViewportPanel",value:function(){this.setState({showBookInfoPanel:!1,showViewportPanel:!this.state.showViewportPanel,showContentsPanel:!1})}},{key:"handleToggleContentsPanel",value:function(){this.setState({showBookInfoPanel:!1,showViewportPanel:!1,showContentsPanel:!this.state.showContentsPanel})}},{key:"handleSaveGlobalInfo",value:function(e){var t=e.title,n=e.creator,a=e.subject,l=e.language;this.setState({showBookInfoPanel:!1}),this.props.Action.saveGlobalSetting(t,n,a,l)}},{key:"handleSaveViewportInfo",value:function(e){this.setState({showViewportPanel:!1}),this.props.Action.saveViewportSetting(e)}},{key:"handleSaveContentsInfo",value:function(e){this.setState({showContentsPanel:!1}),this.props.Action.saveContentsSetting(e)}},{key:"handleHideAllPanel",value:function(){this.setState({showBookInfoPanel:!1,showViewportPanel:!1,showContentsPanel:!1})}}]),t}(u.Component);t["default"]=(0,s.connect)(function(e){var t=e.present,n=e.past,a=e.future;return{State:{mangaInfo:t.mangaInfo,pageInfo:t.pageInfo,undoable:n.length>0,redoable:a.length>0}}},function(e){return{Action:(0,f.bindActionCreators)(i({},g["default"].pageInfo,g["default"].mangaInfo,g["default"].undo),e)}})(C)},302:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(33),o=n(137),r=a(o),i=n(305),c=a(i),u={},d=(0,l.compose)((0,l.applyMiddleware)(r["default"]),window.devToolsExtension?window.devToolsExtension({serialize:function(e,t){return"Symbol"==typeof t?String(t):t}}):function(e){return e})(l.createStore),s=d(c["default"],u);t["default"]=s},303:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(39),o=a(l),r=n(38),i=a(r),c=n(308),u=a(c),d=function(){for(var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",t="",n=36;n-- >0;)t+=27===n||22===n||17===n||12===n?"-":String(e[Math.ceil(35*Math.random())]);return t},s=function(e){var t=new o["default"],n=d();t.folder("META-INF"),t.folder("OPS/images"),t.folder("OPS/xhtml"),t.folder("OPS/css");var a=u["default"]["toc.ncx"],l=e.mangaInfo.contents.map(function(e,t){return'<ncx:navPoint id="p'+e.refindex+'" playOrder="'+(t+1)+'"><ncx:navLabel><ncx:text>'+e.text+'</ncx:text></ncx:navLabel><ncx:content src="p'+e.refindex+'.xhtml"/></ncx:navPoint>'}).join("");a=a.replace(new RegExp("{{uuid}}","gm"),n).replace(new RegExp("{{title}}","gm"),e.mangaInfo.global.title).replace(new RegExp("{{creator}}","gm"),e.mangaInfo.global.creator).replace(new RegExp("<!-- nav map -->","gm"),l);var r=u["default"]["toc.xhtml"],c=e.mangaInfo.contents.map(function(e,t){return'<li epub:type="chapter" id="toc-'+(t+1)+'"><a href="p'+e.refindex+'.xhtml">'+e.text+"</a></li>"}).join(""),s='<li><a href="p1.xhtml">1</a></li>'+e.pageInfo.list.map(function(e,t){return'<li><a href="p'+(t+1)+'.xhtml">'+(t+2)+"</a></li>"}).join("");r=r.replace(new RegExp("{{title}}","gm"),e.mangaInfo.global.title).replace(new RegExp("{{ncxTitle}}","gm"),e.mangaInfo.ncxTitle).replace(new RegExp("<!-- toc -->","gm"),c).replace(new RegExp("<!-- page list -->","gm"),s);var f=u["default"]["package.opf"],p=e.pageInfo.list.map(function(e,t){var n=i["default"].getBlobObject(e),a=String(n.type),l='<item id="j'+(t+1)+'" href="images/'+(t+1)+"."+a.slice(6)+'" media-type="'+a+'"/>';return 0===t&&(l='<item id="cover" href="images/1.'+a.slice(6)+'" media-type="'+a+'"/>'+l),l}).join(""),m=e.pageInfo.list.map(function(e,t){return'<item id="p'+(t+1)+'" href="xhtml/p'+(t+1)+'.xhtml" media-type="application/xhtml+xml"/>'}).join(""),g="right",h=e.pageInfo.list.map(function(e,t){return g="left"===g?"right":"left",'<itemref idref="p'+(t+1)+'" properties="page-spread-'+g+'" />'}).join("");f=f.replace(new RegExp("{{uuid}}","gm"),n).replace(new RegExp("{{title}}","gm"),e.mangaInfo.global.title).replace(new RegExp("{{language}}","gm"),e.mangaInfo.global.language).replace(new RegExp("{{creator}}","gm"),e.mangaInfo.global.creator).replace(new RegExp("{{subject}}","gm"),e.mangaInfo.global.subject).replace(new RegExp("{{createTime}}","gm"),(new Date).toISOString()).replace(new RegExp("<!-- image item -->","gm"),p).replace(new RegExp("<!-- page.xhtml item -->","gm"),m).replace(new RegExp("<!-- image item ref -->","gm"),h);var v={};return e.pageInfo.list.map(function(t,n){v["p"+(n+1)+".xhtml"]=u["default"]["page.xhtml"].replace("{{language}}",e.mangaInfo.global.language).replace("{{title}}",e.mangaInfo.global.title).replace("{{viewport}}","width="+e.pageInfo.viewport.width+",height="+e.pageInfo.viewport.height).replace("{{image file src}}","../images/"+(n+1)+"."+String(i["default"].getBlobObject(t).type).slice(6)).replace("{{position}}",e.pageInfo.viewport.position).replace("{{backgroundColor}}","bg-"+e.pageInfo.viewport.backgroundColor)}),t.file("mimetype",u["default"].mimetype),t.file("META-INF/container.xml",u["default"]["container.xml"]),t.file("OPS/css/page.css",u["default"]["page.css"]),t.file("OPS/xhtml/toc.ncx",a),t.file("OPS/xhtml/toc.xhtml",r),t.file("OPS/package.opf",f),e.pageInfo.list.map(function(e,n){var a=i["default"].getBlobObject(e);t.file("OPS/images/"+(n+1)+"."+String(a.type).slice(6),a)}),Object.keys(v).map(function(e){t.file("OPS/xhtml/"+e,v[e])}),new Promise(function(n){t.generateAsync({type:"blob",mimeType:"application/epub+zip"}).then(function(t){var a=document.createElement("a"),l=window.URL.createObjectURL(t);a.download=e.mangaInfo.global.title.trim()+".zip",a.href=l,a.click(),window.URL.revokeObjectURL(l),n()})})};t["default"]=s},304:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}var l=n(15),o=a(l),r=n(101),i=a(r),c=n(55),u=n(302),d=a(u),s=n(301),f=a(s),p=document.getElementById("body"),m=o["default"].createElement(c.Provider,{store:d["default"]},o["default"].createElement(f["default"],null));i["default"].render(m,p)},305:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(33),o=n(307),r=a(o),i=n(306),c=a(i),u=n(78),d=(0,u.undoable)((0,l.combineReducers)({pageInfo:r["default"],mangaInfo:c["default"]}));t["default"]=d},306:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var o,r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i=n(78),c=a(i),u=n(146),d={global:{title:"",creator:"",subject:"",language:""},ncxTitle:"目次/Table of Contents",contents:[{refindex:1,text:"表紙"}]},s=(o={},l(o,u.ActionType.SAVE_GLOBAL_SETTING,function(e,t){var n=t.title,a=t.creator,l=t.subject,o=t.language;return e.global=r({},e.global,{title:n,creator:a,subject:l,language:o}),e}),l(o,u.ActionType.SAVE_CONTENTS_SETTING,function(e,t){var n=t.data;return e.contents=n,e}),o);t["default"]=(0,c["default"])(d,s)},307:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(78),c=a(i),u=n(147),d=n(38),s=(a(d),{viewport:{height:1500,width:1e3,position:"stretch",backgroundColor:"white"},list:[]}),f=(r={},l(r,u.ActionType.IMPORT_PAGES,function(e,t){var n=t.newFileIndexList;return e.list=[].concat(o(e.list),o(n)),e}),l(r,u.ActionType.SET_COVER_PAGE,function(e,t){var n=t.index,a=e.list.splice(n,1);return e.list.unshift(a),e}),l(r,u.ActionType.REMOVE_PAGE,function(e,t){var n=t.index;e.list.splice(n,1);return e}),l(r,u.ActionType.MOVE_TO_NEXT_PAGE,function(e,t){var n=t.index,a=n+1===e.list.length?n:n+1,l=e.list[n],o=e.list[a];return e.list[n]=o,e.list[a]=l,e}),l(r,u.ActionType.MOVE_TO_PREVIOUS_PAGE,function(e,t){var n=t.index,a=n-1<0?0:n-1,l=e.list[n],o=e.list[a];return e.list[n]=o,e.list[a]=l,e}),l(r,u.ActionType.CHANGE_PAGE_INDEX,function(e,t){var n=t.originIndex,a=t.newIndex,l=e.list[n],o=e.list[a];return n<a&&(e.list.splice(a,1,o,l),e.list.splice(n,1)),n>a&&(e.list.splice(n,1),e.list.splice(a,1,l,o)),e}),l(r,u.ActionType.CUT_PAGE,function(e,t){var n=t.index,a=t.blobIndex;return e.list.splice(n,1,a[1],a[0]),e}),l(r,u.ActionType.ADD_BLANK_PAGE,function(e,t){var n=t.index,a=t.newBlobIndex,l=e.list[n];return e.list.splice(n,1,a,l),e}),l(r,u.ActionType.SAVE_VIEWPORT_SETTING,function(e,t){var n=t.data;return e.viewport=n,e}),r);t["default"]=(0,c["default"])(s,f)},308:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={"page.css":"html,body,div{width:100%;height:100%;padding:0;margin:0;}div.img{display:block;background-repeat:no-repeat;background-position:center;width:100%;height:100%;}div.img.stretch{background-size:100%100%;}div.img.fill{background-size:cover;}div.img.fit{background-size:contain;}div.img.center{}div.img.bg-white{background-color:#fff}div.img.bg-black{background-color:#000}","container.xml":'<?xml version="1.0" encoding="UTF-8"?><container xmlns="urn:oasis:names:tc:opendocument:xmlns:container" version="1.0"><rootfiles><rootfile full-path="OPS/package.opf" media-type="application/oebps-package+xml"/></rootfiles></container>',mimetype:"application/epub+zip","toc.xhtml":'<?xml version="1.0" encoding="UTF-8"?><html><head><title>{{title}}</title></head><body epub:type="frontmatter"><header><h1>{{ncxTitle}}</h1></header><nav epub:type="toc" id="toc"><ol><!-- toc --></ol></nav><nav epub:type="page-list"><ol><!-- page list --></ol></nav></body></html>',"toc.ncx":'<?xml version="1.0" encoding="utf-8" standalone="no"?><ncx:ncx xmlns:ncx="http://www.daisy.org/z3986/2005/ncx/" version="2005-1"><ncx:head><ncx:meta name="dtb:uid" content="urn:uuid:{{uuid}}"/><ncx:meta name="dtb:depth" content="-1"/><ncx:meta name="dtb:totalPageCount" content="0"/><ncx:meta name="dtb:maxPageNumber" content="0"/></ncx:head><ncx:docTitle><ncx:text>{{title}}</ncx:text></ncx:docTitle><ncx:docAuthor><ncx:text>{{creator}}</ncx:text></ncx:docAuthor><ncx:navMap><!-- nav map --></ncx:navMap></ncx:ncx>',"page.xhtml":'<?xml version="1.0" encoding="utf-8"?><html xml:lang="{{language}}" xmlns="http://www.w3.org/1999/xhtml" xmlns:xml="http://www.w3.org/XML/1998/namespace" xmlns:epub="http://www.idpf.org/2007/ops"><head><title>{{title}}</title><meta name="viewport" content="{{viewport}}"/><link rel="stylesheet" href="../css/page.css" type="text/css" /></head><body epub:type="bodymatter"><div style="background-image: url(\'{{image file src}}\')" class="img {{position}} {{backgroundColor}}"></div></body></html>',"package.opf":'<?xml version="1.0" encoding="UTF-8"?><package xmlns="http://www.idpf.org/2007/opf" version="3.0" xml:lang="{{language}}" prefix="rendition: http://www.idpf.org/vocab/rendition/#" unique-identifier="ootuya-id"><metadata xmlns:opf="http://www.idpf.org/2007/opf" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:dcterms="http://purl.org/dc/terms/"><dc:identifier id="ootuya-id">urn:uuid:{{uuid}}</dc:identifier><dc:title>{{title}}</dc:title><dc:language>{{language}}</dc:language><dc:subject>{{subject}}</dc:subject><dc:creator>{{creator}}</dc:creator><dc:publisher></dc:publisher><dc:rights></dc:rights><meta property="dcterms:modified">{{createTime}}</meta><meta property="rendition:layout">pre-paginated</meta><meta property="rendition:orientation">portrait</meta><meta property="rendition:spread">landscape</meta></metadata><manifest><item id="page-style" href="css/page.css" media-type="text/css"/><!-- image item --><item id="toc" properties="nav" href="xhtml/toc.xhtml" media-type="application/xhtml+xml"/><!-- page.xhtml item --><item id="ncxtoc" href="xhtml/toc.ncx" media-type="application/x-dtbncx+xml"/></manifest><spine toc="ncxtoc" page-progression-direction="rtl"><!-- image item ref --></spine></package>'};t["default"]=n}});