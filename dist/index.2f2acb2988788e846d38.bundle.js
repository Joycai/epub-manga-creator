webpackJsonp([1],{0:function(e,t,a){e.exports=a(298)},48:function(e,t){"use strict";function a(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var n={},l=0,r=function(){return Object.keys(n).length},o=function(e){var t=[];return[].concat(a(e)).map(function(e){var a=new Blob([e],{type:String(e.type)}),r=window.URL.createObjectURL(a);n[String(l)]={blob:a,objectURL:r},t.push(l),l+=1}),t},c=function(e,t){var a=String(e);return window.URL.revokeObjectURL(n[a].objectURL),n[a]={blob:t,objectURL:window.URL.createObjectURL(t)},a},i=function(){Object.keys(n).map(function(e){window.URL.revokeObjectURL(n[e].objectURL)}),n={}},u=function(e){return n[String(e)].objectURL},f=function(e){return n[String(e)].blob},d=function(e){var t=String(e);return window.URL.revokeObjectURL(n[t].objectURL),delete n[t],t};t["default"]={removeAllBlob:i,getLength:r,updateFile:c,importFiles:o,getObjectURL:u,getBlobObject:f,removeBlob:d}},143:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ActionType=void 0;var l=a(38),r=(n(l),{SAVE_GLOBAL_SETTING:"SAVE_GLOBAL_SETTING",SAVE_NCX_SETTING:"SAVE_NCX_SETTING",UPDATE_UUID:"UPDATE_UUID"}),o=function(e){return{type:r.SAVE_GLOBAL_SETTING,data:e}},c=function(){return{type:r.UPDATE_UUID}};t.ActionType=r,t["default"]={updateUUID:c,saveGlobalSetting:o}},144:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ActionType=void 0;var l=a(38),r=(n(l),a(48)),o=n(r),c={IMPORT_PAGES:"IMPORT_PAGES",SET_COVER_PAGE:"SET_COVER_PAGE",ROTATE:"ROTATE_PAGE",MOVE_TO_NEXT_PAGE:"MOVE_TO_NEXT_PAGE",MOVE_TO_PREVIOUS_PAGE:"MOVE_TO_PREVIOUS_PAGE",CUT_PAGE:"CUT_PAGE"},i=function(e){return function(t){return{type:e,pageNum:t}}},u=function(e){var t=o["default"].importFiles(e);return{type:c.IMPORT_PAGES,newFileIndexList:t}},f=i(c.SET_COVER_PAGE),d=i(c.ROTATE_PAGE),s=i(c.MOVE_TO_NEXT_PAGE),m=i(c.MOVE_TO_PREVIOUS_PAGE),p=i(c.CUT_PAGE);t.ActionType=c,t["default"]={rotatePage:d,importPages:u,setCover:f,moveToNextPage:s,moveToPreviousPage:m,cutPage:p}},145:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(146),r=n(l),o=function(e,t){return function(){var a=arguments.length<=0||void 0===arguments[0]?e:arguments[0],n=arguments[1];return n.type in t?t[n.type]((0,r["default"])(a),n):a}};t["default"]=o},146:function(e,t,a){(function(e,t){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},n=function(){function t(n,l,r,o,u){function s(n,r){if(null===n)return null;if(0===r)return n;var b,v;if("object"!=("undefined"==typeof n?"undefined":a(n)))return n;if(n instanceof i)b=new i;else if(n instanceof f)b=new f;else if(n instanceof d)b=new d(function(e,t){n.then(function(t){e(s(t,r-1))},function(e){t(s(e,r-1))})});else if(t.__isArray(n))b=[];else if(t.__isRegExp(n))b=new RegExp(n.source,c(n)),n.lastIndex&&(b.lastIndex=n.lastIndex);else if(t.__isDate(n))b=new Date(n.getTime());else{if(g&&e.isBuffer(n))return b=new e(n.length),n.copy(b),b;n instanceof Error?b=Object.create(n):"undefined"==typeof o?(v=Object.getPrototypeOf(n),b=Object.create(v)):(b=Object.create(o),v=o)}if(l){var h=m.indexOf(n);if(h!=-1)return p[h];m.push(n),p.push(b)}if(n instanceof i)for(var y=n.keys();;){var E=y.next();if(E.done)break;var x=s(E.value,r-1),w=s(n.get(E.value),r-1);b.set(x,w)}if(n instanceof f)for(var _=n.keys();;){var E=_.next();if(E.done)break;var O=s(E.value,r-1);b.add(O)}for(var j in n){var P;v&&(P=Object.getOwnPropertyDescriptor(v,j)),P&&null==P.set||(b[j]=s(n[j],r-1))}if(Object.getOwnPropertySymbols)for(var I=Object.getOwnPropertySymbols(n),j=0;j<I.length;j++){var N=I[j],T=Object.getOwnPropertyDescriptor(n,N);(!T||T.enumerable||u)&&(b[N]=s(n[N],r-1),T.enumerable||Object.defineProperty(b,N,{enumerable:!1}))}if(u)for(var S=Object.getOwnPropertyNames(n),j=0;j<S.length;j++){var k=S[j],T=Object.getOwnPropertyDescriptor(n,k);T&&T.enumerable||(b[k]=s(n[k],r-1),Object.defineProperty(b,k,{enumerable:!1}))}return b}"object"===("undefined"==typeof l?"undefined":a(l))&&(r=l.depth,o=l.prototype,u=l.includeNonEnumerable,l=l.circular);var m=[],p=[],g="undefined"!=typeof e;return"undefined"==typeof l&&(l=!0),"undefined"==typeof r&&(r=1/0),s(n,r)}function n(e){return Object.prototype.toString.call(e)}function l(e){return"object"===("undefined"==typeof e?"undefined":a(e))&&"[object Date]"===n(e)}function r(e){return"object"===("undefined"==typeof e?"undefined":a(e))&&"[object Array]"===n(e)}function o(e){return"object"===("undefined"==typeof e?"undefined":a(e))&&"[object RegExp]"===n(e)}function c(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}var i;try{i=Map}catch(u){i=function(){}}var f;try{f=Set}catch(u){f=function(){}}var d;try{d=Promise}catch(u){d=function(){}}return t.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},t.__objToStr=n,t.__isDate=l,t.__isArray=r,t.__isRegExp=o,t.__getRegExpFlags=c,t}();"object"===a(t)&&t.exports&&(t.exports=n)}).call(t,a(15).Buffer,a(279)(e))},279:function(e,t){"use strict";e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},293:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(143),r=n(l),o=a(144),c=n(o);t["default"]={mangaInfo:r["default"],pageInfo:c["default"]}},294:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Icon=t.Button=t.Row=void 0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},r=a(21),o=n(r),c=function(e){var t=e.color,a=e.size,n=e["float"],r=Boolean(e.disabled),c=Boolean(e.active),i="btn",u={};return i+=t?" btn-"+t:"",i+=a?" btn-"+a:"",i+=n?" float-"+n:"",i+=c?" active":"",Object.keys(e).map(function(t){"color"!==t&&"size"!==t&&"float"!==t&&"active"!==t&&"disabled"!==t&&(u[t]=e[t])}),r===!0&&(u.disabled=!0),o["default"].createElement("button",l({className:i},u))},i=function(e){var t=e.fw,a=e.name,n="fa fa-"+a;return n=Boolean(t)?n+" fa-fw":n+"",o["default"].createElement("span",{className:n})},u=function(e){return o["default"].createElement("div",l({className:"row"},e))};t.Row=u,t.Button=c,t.Icon=i},295:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function l(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},u=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),f=a(21),d=n(f),s=a(54),m=a(33),p=a(293),g=n(p),b=a(48),v=n(b),h=a(294),y=a(297),E=n(y),x=function(e){function t(e){return r(this,t),o(this,Object.getPrototypeOf(t).call(this,e))}return c(t,e),u(t,[{key:"render",value:function(){var e=this.props;return d["default"].createElement("div",{className:"card",style:{marginTop:20,background:"#f6f6f6"}},d["default"].createElement("img",{src:e.src,style:{alignSelf:"center"},className:"card-img-top",height:"210",width:"140"}),d["default"].createElement("div",{className:"card-block",style:{borderTop:"1px solid rgba(0,0,0,.125)",background:"#fff"}},d["default"].createElement(h.Button,i({color:"secondary",size:"sm"},0===e.index?{disabled:"true"}:{}),d["default"].createElement(h.Icon,{name:"book"}))," ",d["default"].createElement(h.Button,{color:"secondary",size:"sm",disabled:"true"},d["default"].createElement(h.Icon,{name:"repeat"}))," ",d["default"].createElement(h.Button,{color:"secondary",size:"sm",disabled:"true"},d["default"].createElement(h.Icon,{name:"cut"})),d["default"].createElement(h.Button,{color:"secondary",size:"sm","float":"right"},d["default"].createElement(h.Icon,{name:"angle-right"})),d["default"].createElement("span",{className:"float-right"}," "),d["default"].createElement(h.Button,i({color:"secondary",size:"sm","float":"right"},0===e.index?{disabled:"true"}:{}),d["default"].createElement(h.Icon,{name:"angle-left"}))),d["default"].createElement("div",{className:"card-footer text-center"},d["default"].createElement("div",{className:"card-text text-muted",style:{cursor:"default"}},0===e.index?"Cover":e.index)))}}]),t}(f.Component),w=function(e){function t(e){r(this,t);var a=o(this,Object.getPrototypeOf(t).call(this,e));return a.state={firstUpload:!0},a.handleClickUploadButton=a.handleClickUploadButton.bind(a),a.handleClickGenerateButton=a.handleClickGenerateButton.bind(a),a}return c(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=this.state;return d["default"].createElement(h.Row,null,d["default"].createElement("div",{className:"col"},d["default"].createElement("div",{className:"card card-default"},d["default"].createElement("div",{className:"card-block"},d["default"].createElement("p",{className:"card-text",style:{cursor:"default"}},d["default"].createElement(h.Button,{color:"primary",onClick:this.handleClickUploadButton},d["default"].createElement(h.Icon,{name:"upload",fw:"true"}))," ",d["default"].createElement(h.Button,i({color:"secondary"},t.firstUpload?{disabled:"true"}:{},{onClick:e.handleToggleGlobalInfoPanel}),d["default"].createElement(h.Icon,{name:"edit",fw:"true"}))," ",d["default"].createElement(h.Button,{color:"secondary",disabled:"true"},d["default"].createElement(h.Icon,{name:"square-o",fw:"true"}))," ",d["default"].createElement(h.Button,{color:"secondary",disabled:"true"},d["default"].createElement(h.Icon,{name:"list-ul",fw:"true"}))," ",d["default"].createElement(h.Button,{color:"secondary",disabled:"true"},d["default"].createElement(h.Icon,{name:"cut",fw:"true",disabled:"true"}))," ",d["default"].createElement(h.Button,{color:"secondary",disabled:"true"},d["default"].createElement(h.Icon,{name:"eye",fw:"true"})),d["default"].createElement(h.Button,{color:"success","float":"right",onClick:this.handleClickGenerateButton},d["default"].createElement(h.Icon,{name:"download",fw:"true"})))))))}},{key:"handleClickUploadButton",value:function(){var e=document.createElement("input"),t="image/jpeg,image/png",a=this.props.Action,n=this;e.type="file",e.multiple="multiple",e.accept=t,e.onchange=function(e){var r=[].concat(l(this.files)).filter(function(e){return t.indexOf(e.type)>-1});r.length&&(a.importPages(r),n.state.firstUpload&&n.setState({firstUpload:!1}))},e.click()}},{key:"handleClickGenerateButton",value:function(){(0,E["default"])(this.props.State)}}]),t}(f.Component),_=(function(e){function t(e){return r(this,t),o(this,Object.getPrototypeOf(t).call(this,e))}return c(t,e),u(t,[{key:"render",value:function(){return d["default"].createElement(h.Row,null,d["default"].createElement("div",{className:"col-8"},d["default"].createElement("div",{className:"card"},d["default"].createElement("div",{className:"card-header"},"NCX"),d["default"].createElement("ul",{className:"list-group list-group-flush"},d["default"].createElement("li",{className:"list-group-item"},d["default"].createElement("div",{className:"row",style:{flexGrow:1}},d["default"].createElement("div",{className:"col"},d["default"].createElement("input",{type:"text",className:"form-control input-sm",placeholder:"title"})),d["default"].createElement("div",{className:"col"},d["default"].createElement("input",{type:"number",min:"1",className:"form-control input-sm",placeholder:"page num"})),d["default"].createElement("div",{className:"col",style:{display:"flex",justifyContent:"flex-end"}},d["default"].createElement(h.Button,{color:"secondary"},d["default"].createElement(h.Icon,{name:"plus"}))," ",d["default"].createElement(h.Button,{color:"secondary"},d["default"].createElement(h.Icon,{name:"minus"})))))),d["default"].createElement("div",{className:"card-footer"},d["default"].createElement(h.Button,{color:"primary"},"Save")))))}}]),t}(f.Component),function(e){function t(e){r(this,t);var a=o(this,Object.getPrototypeOf(t).call(this,e));return a.handleClickSaveButton=a.handleClickSaveButton.bind(a),a}return c(t,e),u(t,[{key:"render",value:function(){var e=this.props;return d["default"].createElement(h.Row,null,d["default"].createElement("div",{className:"col"},d["default"].createElement("div",{className:"card"},d["default"].createElement("div",{className:"card-header"},"Book Info"),d["default"].createElement("div",{className:"card-block"},d["default"].createElement(h.Row,null,d["default"].createElement("div",{className:"col"},d["default"].createElement("div",{className:"form-group row"},d["default"].createElement("label",{className:"col-2 col-form-label"},"Title"),d["default"].createElement("div",{className:"col-10"},d["default"].createElement("input",{defaultValue:e.title,ref:"g_title",className:"form-control",type:"text"})))),d["default"].createElement("div",{className:"col"},d["default"].createElement("div",{className:"form-group row"},d["default"].createElement("label",{className:"col-2 col-form-label"},"Creator"),d["default"].createElement("div",{className:"col-10"},d["default"].createElement("input",{defaultValue:e.creator,ref:"g_creator",className:"form-control",type:"text"}))))),d["default"].createElement("p",null),d["default"].createElement(h.Row,null,d["default"].createElement("div",{className:"col"},d["default"].createElement("div",{className:"form-group row"},d["default"].createElement("label",{className:"col-2 col-form-label"},"Subject"),d["default"].createElement("div",{className:"col-10"},d["default"].createElement("input",{defaultValue:e.subject,ref:"g_subject",list:"datalist_subject",className:"form-control",type:"text"}),d["default"].createElement("datalist",{id:"datalist_subject"},d["default"].createElement("option",{value:"少年"}),d["default"].createElement("option",{value:"靑年"}),d["default"].createElement("option",{value:"成年コミック"}))))),d["default"].createElement("div",{className:"col"},d["default"].createElement("div",{className:"form-group row"},d["default"].createElement("label",{className:"col-2 col-form-label"},"Language"),d["default"].createElement("div",{className:"col-10"},d["default"].createElement("input",{defaultValue:e.language,ref:"g_language",list:"datalist_language",className:"form-control",type:"text"}),d["default"].createElement("datalist",{id:"datalist_language"},d["default"].createElement("option",{value:"ja"}),d["default"].createElement("option",{value:"zh-CN"}),d["default"].createElement("option",{value:"en-US"}))))))),d["default"].createElement("div",{className:"card-footer"},d["default"].createElement(h.Button,{color:"primary",onClick:this.handleClickSaveButton},"Save")))))}},{key:"handleClickSaveButton",value:function(){var e=this.refs.g_title.value,t=this.refs.g_creator.value,a=this.refs.g_subject.value,n=this.refs.g_language.value;this.props.handleSaveGlobalInfo({title:e,creator:t,subject:a,language:n})}}]),t}(f.Component)),O=function(e){function t(e){r(this,t);var a=o(this,Object.getPrototypeOf(t).call(this,e));return a.state={showBookInfoPanel:!1,showNCXPanel:!1},a.handleToggleGlobalInfoPanel=a.handleToggleGlobalInfoPanel.bind(a),a.handleSaveGlobalInfo=a.handleSaveGlobalInfo.bind(a),a}return c(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.Action,a=e.State,n=Math.ceil(a.pageInfo.list.length/5),l=5-a.pageInfo.list.length%5,r=0,o=[],c=[],u=a.pageInfo.list.length-1;return l=5===l?0:l,a.pageInfo.list.map(function(e,t){if(c.push(d["default"].createElement(x,{key:n+"-"+r,src:v["default"].getObjectURL(e),index:t})),t===u)for(r=4;l-- >0;)c.push(d["default"].createElement("div",{style:{marginTop:20},className:"card",key:"blank-"+l}));r<4?r++:(o.push(d["default"].createElement(h.Row,{key:"row-"+n},d["default"].createElement("div",{className:"col"},d["default"].createElement("div",{className:"card-group"},c)))),c=[],n--,r=0)}),d["default"].createElement("div",null,d["default"].createElement("nav",{className:"navbar navbar-light bg-faded"},d["default"].createElement("h3",{className:"navbar-brand",href:""},"Epub Manga Creator")),d["default"].createElement("p",null),d["default"].createElement("div",{className:"container"},d["default"].createElement(w,{Action:t,State:a,handleToggleGlobalInfoPanel:this.handleToggleGlobalInfoPanel}),d["default"].createElement("p",null),this.state.showBookInfoPanel?[d["default"].createElement(_,i({key:"EditBookInfoPanel",handleSaveGlobalInfo:this.handleSaveGlobalInfo},a.mangaInfo.global)),d["default"].createElement("p",{key:"p"})]:void 0,d["default"].createElement(h.Row,null,d["default"].createElement("div",{className:"col"},d["default"].createElement("div",{className:"card card-default"},d["default"].createElement("div",{className:"card-header"},"Pages"),d["default"].createElement("div",{className:"card-block",style:{paddingTop:0}},o)))),d["default"].createElement("p",null),d["default"].createElement("p",{className:"text-muted"},d["default"].createElement("span",{className:"float-right"},"wing-kai's work")),d["default"].createElement("p",null," ")))}},{key:"handleToggleGlobalInfoPanel",value:function(){this.setState({showBookInfoPanel:!this.state.showBookInfoPanel})}},{key:"handleSaveGlobalInfo",value:function(e){this.setState({showBookInfoPanel:!1}),this.props.Action.saveGlobalSetting(e)}}]),t}(f.Component);t["default"]=(0,s.connect)(function(e){var t=e.mangaInfo,a=e.pageInfo;return{State:{mangaInfo:t,pageInfo:a}}},function(e){return{Action:(0,m.bindActionCreators)(i({},g["default"].pageInfo,g["default"].mangaInfo),e)}})(O)},296:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(33),r=a(134),o=n(r),c=a(299),i=n(c),u={},f=(0,l.compose)((0,l.applyMiddleware)(o["default"]),window.devToolsExtension?window.devToolsExtension({serialize:function(e,t){return"Symbol"==typeof t?String(t):t}}):function(e){return e})(l.createStore),d=f(i["default"],u);t["default"]=d},297:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(38),r=n(l),o=a(48),c=n(o),i=a(302),u=n(i),f=function(e){var t=new r["default"];t.folder("META-INF"),t.folder("OPS/css"),t.folder("OPS/images"),t.folder("OPS/xhtml");var a=u["default"]["toc.ncx"],n=e.mangaInfo.ncx.map(function(e,t){return'<ncx:navPoint id="p'+e.pageNum+'" playOrder="'+(t+1)+'"><ncx:navLabel><ncx:text>'+e.text+'</ncx:text></ncx:navLabel><ncx:content src="p'+e.pageNum+'.xhtml"/></ncx:navPoint>'}).join("");a=a.replace(new RegExp("{{uuid}}","gm"),e.mangaInfo.global.uuid).replace(new RegExp("{{title}}","gm"),e.mangaInfo.global.title).replace(new RegExp("{{creator}}","gm"),e.mangaInfo.global.creator).replace(new RegExp("<!-- nav map -->","gm"),n);var l=u["default"]["toc.xhtml"],o=e.mangaInfo.ncx.map(function(e,t){return'<li epub:type="chapter" id="toc-'+(t+1)+'"><a href="p'+e.pageNum+'.xhtml">'+e.text+"</a></li>"}).join(""),i='<li><a href="p1.xhtml">1</a></li>'+e.pageInfo.list.map(function(e,t){return'<li><a href="p'+(t+1)+'.xhtml">'+(t+2)+"</a></li>"}).join("");l=l.replace(new RegExp("{{title}}","gm"),e.mangaInfo.global.title).replace(new RegExp("{{ncxTitle}}","gm"),e.mangaInfo.ncxTitle).replace(new RegExp("<!-- toc -->","gm"),o).replace(new RegExp("<!-- page list -->","gm"),i);var f=u["default"]["package.opf"],d=e.pageInfo.list.map(function(e,t){var a=c["default"].getBlobObject(e),n=String(a.type),l='<item id="j'+(t+1)+'" href="images/'+(t+1)+"."+n.slice(6)+'" media-type="'+n+'"/>';return 0===t&&(l='<item id="cover" href="images/1.'+n.slice(6)+'" media-type="'+n+'"/>'+l),l}).join(""),s=e.pageInfo.list.map(function(e,t){return'<item id="p'+(t+1)+'" href="xhtml/p'+(t+1)+'.xhtml" media-type="application/xhtml+xml"/>'}).join(""),m="right",p=e.pageInfo.list.map(function(e,t){return m="left"===m?"right":"left",'<itemref idref="p'+(t+1)+'" properties="page-spread-'+m+'" />'}).join("");f=f.replace(new RegExp("{{uuid}}","gm"),e.mangaInfo.global.uuid).replace(new RegExp("{{title}}","gm"),e.mangaInfo.global.title).replace(new RegExp("{{language}}","gm"),e.mangaInfo.global.language).replace(new RegExp("{{creator}}","gm"),e.mangaInfo.global.creator).replace(new RegExp("{{subject}}","gm"),e.mangaInfo.global.subject).replace(new RegExp("{{createTime}}","gm"),(new Date).toISOString()).replace(new RegExp("<!-- image item -->","gm"),d).replace(new RegExp("<!-- page.xhtml item -->","gm"),s).replace(new RegExp("<!-- image item ref -->","gm"),p);var g={};return e.pageInfo.list.map(function(t,a){g["p"+(a+1)+".xhtml"]=u["default"]["page.xhtml"].replace("{{language}}",e.mangaInfo.global.language).replace("{{title}}",e.mangaInfo.global.title).replace("{{viewport}}","width="+e.pageInfo.viewport.width+",height="+e.pageInfo.viewport.height).replace("{{image file src}}","../images/"+(a+1)+"."+String(c["default"].getBlobObject(t).type).slice(6))}),t.file("mimetype",u["default"].mimetype),t.file("META-INF/container.xml",u["default"]["container.xml"]),t.file("OPS/css/default.css",u["default"]["default.css"]),t.file("OPS/css/en.css",u["default"]["en.css"]),t.file("OPS/css/ja-jp.css",u["default"]["ja-jp.css"]),t.file("OPS/xhtml/toc.ncx",a),t.file("OPS/xhtml/toc.xhtml",l),t.file("OPS/package.opf",f),e.pageInfo.list.map(function(e,a){var n=c["default"].getBlobObject(e);t.file("OPS/images/"+(a+1)+"."+String(n.type).slice(6),n)}),Object.keys(g).map(function(e){t.file("OPS/xhtml/"+e,g[e])}),new Promise(function(e){t.generateAsync({type:"blob",mimeType:"application/epub+zip"}).then(function(t){var a=document.createElement("a"),n=window.URL.createObjectURL(t);a.download="manga.epub",a.href=n,a.click(),window.URL.revokeObjectURL(n),e()})})};t["default"]=f},298:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var l=a(21),r=n(l),o=a(98),c=n(o),i=a(54),u=a(296),f=n(u),d=a(295),s=n(d),m=document.getElementById("body"),p=r["default"].createElement(i.Provider,{store:f["default"]},r["default"].createElement(s["default"],null));c["default"].render(p,m)},299:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(33),r=a(301),o=n(r),c=a(300),i=n(c),u=(0,l.combineReducers)({pageInfo:o["default"],mangaInfo:i["default"]});t["default"]=u},300:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Object.defineProperty(t,"__esModule",{value:!0});var r,o=a(145),c=n(o),i=a(143),u=function(){for(var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",t="",a=36;a-- >0;)t+=27===a||22===a||17===a||12===a?"-":String(e[Math.ceil(35*Math.random())]);return t},f={global:{uuid:u(),title:"漫画测试",creator:"wing-kai",subject:"成年コミック",language:"ja"},ncxTitle:"目次/Table of Contents",ncx:[{pageNum:1,text:"表紙"}]},d=(r={},l(r,i.ActionType.UPDATE_UUID,function(e){return e.global.uuid=u(),e}),l(r,i.ActionType.SAVE_GLOBAL_SETTING,function(e,t){var a=t.data;return e.global=a,e}),l(r,i.ActionType.SAVE_NCX_SETTING,function(e,t){var a=t.data;return e.ncx=a,e}),r);t["default"]=(0,c["default"])(f,d)},301:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var o,c=a(145),i=n(c),u=a(144),f=a(48),d=(n(f),{firstBlankPage:!0,viewport:{height:1500,width:1058},list:[]}),s=(o={},l(o,u.ActionType.IMPORT_PAGES,function(e,t){var a=t.newFileIndexList;return e.list=[].concat(r(e.list),r(a)),e}),l(o,u.ActionType.SET_COVER_PAGE,function(e,t){t.num;return e}),l(o,u.ActionType.ROTATE_PAGE,function(e,t){t.num;return e}),o);t["default"]=(0,i["default"])(d,s)},302:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={"container.xml":'<?xml version="1.0" encoding="UTF-8"?><container xmlns="urn:oasis:names:tc:opendocument:xmlns:container" version="1.0"><rootfiles><rootfile full-path="OPS/package.opf" media-type="application/oebps-package+xml"/></rootfiles></container>',mimetype:"application/epub+zip","toc.xhtml":'<?xml version="1.0" encoding="UTF-8"?><html><head><title>{{title}}</title><link href="../css/default.css" rel="stylesheet" type="text/css" /></head><body epub:type="frontmatter"><header><h1>{{ncxTitle}}</h1></header><nav epub:type="toc" id="toc"><ol>  <!-- toc --></ol></nav><nav epub:type="page-list"><ol><!-- page list --></ol></nav></body></html>',"toc.ncx":'<?xml version="1.0" encoding="utf-8" standalone="no"?><ncx:ncx xmlns:ncx="http://www.daisy.org/z3986/2005/ncx/" version="2005-1"><ncx:head><ncx:meta name="dtb:uid" content="urn:uuid:{{uuid}}"/><ncx:meta name="dtb:depth" content="-1"/><ncx:meta name="dtb:totalPageCount" content="0"/><ncx:meta name="dtb:maxPageNumber" content="0"/></ncx:head><ncx:docTitle><ncx:text>{{title}}</ncx:text></ncx:docTitle><ncx:docAuthor><ncx:text>{{creator}}</ncx:text></ncx:docAuthor><ncx:navMap><!-- nav map --></ncx:navMap></ncx:ncx>',"page.xhtml":'<?xml version="1.0" encoding="utf-8"?><html xml:lang="{{language}}" xmlns="http://www.w3.org/1999/xhtml" xmlns:xml="http://www.w3.org/XML/1998/namespace" xmlns:epub="http://www.idpf.org/2007/ops"><head><title>{{title}}</title><meta name="viewport" content="{{viewport}}"/></head><body epub:type="bodymatter"><img src="{{image file src}}"/></body></html>',"package.opf":'<?xml version="1.0" encoding="UTF-8"?><package xmlns="http://www.idpf.org/2007/opf" version="3.0" xml:lang="{{language}}" prefix="rendition: http://www.idpf.org/vocab/rendition/#" unique-identifier="ootuya-id"><metadata xmlns:opf="http://www.idpf.org/2007/opf" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:dcterms="http://purl.org/dc/terms/"><dc:identifier id="ootuya-id">urn:uuid:{{uuid}}</dc:identifier><dc:title>{{title}}</dc:title><dc:language>{{language}}</dc:language><dc:subject>{{subject}}</dc:subject><dc:creator>{{creator}}</dc:creator><meta property="dcterms:modified">{{createTime}}</meta><meta property="rendition:layout">pre-paginated</meta><meta property="rendition:orientation">portrait</meta><meta property="rendition:spread">landscape</meta></metadata><manifest><item id="default-style" href="css/default.css" media-type="text/css"/><item id="en-style" href="css/en.css" media-type="text/css"/><item id="ja-jp-style" href="css/ja-jp.css" media-type="text/css"/><!-- image item --><item id="toc" properties="nav" href="xhtml/toc.xhtml" media-type="application/xhtml+xml"/><!-- page.xhtml item --><item id="ncxtoc" href="xhtml/toc.ncx" media-type="application/x-dtbncx+xml"/></manifest><spine toc="ncxtoc" page-progression-direction="rtl"><!-- image item ref --></spine></package>',"default.css":'@charset "utf-8";ol{list-style-type:none}a{text-decoration:none}a:hover{text-decoration:underline}body{font-size:14pt;font-family:"KozMinPr6N-Medium","HiraMinProN-W3","ＭＳ 明朝",serif,sans-serif;margin:auto 1em;padding:1em 0;max-height:28em;background-color:#fff4e7}',"en.css":"h1.ja-jp,h2.ja-jp,h3.ja-jp,p.ja-jp,dt.ja-jp,dd.ja-jp{display:none}","ja-jp.css":"h1.en,h2.en,h3.en,p.en,dt.en,dd.en{display:none}"};t["default"]=a}});