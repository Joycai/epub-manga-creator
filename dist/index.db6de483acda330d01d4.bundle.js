webpackJsonp([1],{0:function(e,t,n){e.exports=n(298)},48:function(e,t){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var a={},l=0,o=function(){return Object.keys(a).length},r=function(e){var t=[];return[].concat(n(e)).map(function(e){var n=new Blob([e],{type:String(e.type)}),o=window.URL.createObjectURL(n);a[String(l)]={blob:n,objectURL:o},t.push(l),l+=1}),t},i=function(e){var t=l;return a[t]={blob:e,objectURL:window.URL.createObjectURL(e)},l+=1,t},c=function(e,t){var n=String(e);return window.URL.revokeObjectURL(a[n].objectURL),a[n]={blob:t,objectURL:window.URL.createObjectURL(t)},n},u=function(){Object.keys(a).map(function(e){window.URL.revokeObjectURL(a[e].objectURL)}),a={}},d=function(e){return a[String(e)].objectURL},f=function(e){return a[String(e)].blob},s=function(e){var t=String(e);return window.URL.revokeObjectURL(a[t].objectURL),delete a[t],t};t["default"]={importBlob:i,removeAllBlob:u,getLength:o,updateBlob:c,importFiles:r,getObjectURL:d,getBlobObject:f,removeBlob:s}},143:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ActionType=void 0;var l=n(38),o=(a(l),{SAVE_GLOBAL_SETTING:"SAVE_GLOBAL_SETTING",SAVE_NCX_SETTING:"SAVE_NCX_SETTING",UPDATE_UUID:"UPDATE_UUID"}),r=function(e){return{type:o.SAVE_GLOBAL_SETTING,data:e}},i=function(){return{type:o.UPDATE_UUID}};t.ActionType=o,t["default"]={updateUUID:i,saveGlobalSetting:r}},144:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ActionType=void 0;var l=n(38),o=(a(l),n(48)),r=a(o),i={IMPORT_PAGES:"IMPORT_PAGES",SAVE_VIEWPORT_SETTING:"SAVE_VIEWPORT_SETTING",SET_COVER_PAGE:"SET_COVER_PAGE",MOVE_TO_NEXT_PAGE:"MOVE_TO_NEXT_PAGE",MOVE_TO_PREVIOUS_PAGE:"MOVE_TO_PREVIOUS_PAGE",CHANGE_PAGE_INDEX:"CHANGE_PAGE_INDEX",REMOVE_PAGE:"REMOVE_PAGE",ADD_BLANK_PAGE:"ADD_BLANK_PAGE",CUT_PAGE:"CUT_PAGE"},c=function(e){return function(t){return{type:e,index:t}}},u=function(e){var t=r["default"].importFiles(e);return{type:i.IMPORT_PAGES,newFileIndexList:t}},d=function(e){return{type:i.SAVE_VIEWPORT_SETTING,data:e}},f=c(i.REMOVE_PAGE),s=c(i.SET_COVER_PAGE),m=c(i.MOVE_TO_NEXT_PAGE),p=c(i.MOVE_TO_PREVIOUS_PAGE),g=function(e,t){return{type:i.CHANGE_PAGE_INDEX,originIndex:e,newIndex:t}},h=function(e){return function(t,n){var a=n().pageInfo.list[e],l=r["default"].getBlobObject(a).type,o=new Image,c=document.createElement("canvas"),u=c.getContext("2d"),d=[];new Promise(function(e){o.onload=e}).then(function(e){return c.width=o.width/2,c.height=o.height,u.drawImage(o,0,0),new Promise(function(e){c.toBlob(function(t){d.push(t),e()},l)})}).then(function(){return u.drawImage(o,0-c.width,0),new Promise(function(e){c.toBlob(function(t){d.push(t),e()},l)})}).then(function(){r["default"].updateBlob(a,d[0]);var n=r["default"].importBlob(d[1]);t({type:i.CUT_PAGE,index:e,newBlobIndex:n})}),o.src=r["default"].getObjectURL(a)}},v=function(e){return function(t){var n=document.createElement("canvas"),a=n.getContext("2d");n.width=1,n.height=1,a.fillStyle="#fff",a.fillRect(0,0,1,1),a.beginPath(),n.toBlob(function(n){var a=r["default"].importBlob(n);t({type:i.ADD_BLANK_PAGE,index:e,newBlobIndex:a})},"image/png")}};t.ActionType=i,t["default"]={importPages:u,addBlankPage:v,setCover:s,moveToNextPage:m,moveToPreviousPage:p,changePageIndex:g,cutPage:h,removePage:f,saveViewportSetting:d}},145:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(146),o=a(l),r=function(e,t){return function(){var n=arguments.length<=0||void 0===arguments[0]?e:arguments[0],a=arguments[1];return a.type in t?t[a.type]((0,o["default"])(n),a):n}};t["default"]=r},146:function(e,t,n){(function(e,t){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},a=function(){function t(a,l,o,r,u){function s(a,o){if(null===a)return null;if(0===o)return a;var h,v;if("object"!=("undefined"==typeof a?"undefined":n(a)))return a;if(a instanceof c)h=new c;else if(a instanceof d)h=new d;else if(a instanceof f)h=new f(function(e,t){a.then(function(t){e(s(t,o-1))},function(e){t(s(e,o-1))})});else if(t.__isArray(a))h=[];else if(t.__isRegExp(a))h=new RegExp(a.source,i(a)),a.lastIndex&&(h.lastIndex=a.lastIndex);else if(t.__isDate(a))h=new Date(a.getTime());else{if(g&&e.isBuffer(a))return h=new e(a.length),a.copy(h),h;a instanceof Error?h=Object.create(a):"undefined"==typeof r?(v=Object.getPrototypeOf(a),h=Object.create(v)):(h=Object.create(r),v=r)}if(l){var b=m.indexOf(a);if(b!=-1)return p[b];m.push(a),p.push(h)}if(a instanceof c)for(var E=a.keys();;){var y=E.next();if(y.done)break;var x=s(y.value,o-1),w=s(a.get(y.value),o-1);h.set(x,w)}if(a instanceof d)for(var P=a.keys();;){var y=P.next();if(y.done)break;var _=s(y.value,o-1);h.add(_)}for(var I in a){var k;v&&(k=Object.getOwnPropertyDescriptor(v,I)),k&&null==k.set||(h[I]=s(a[I],o-1))}if(Object.getOwnPropertySymbols)for(var N=Object.getOwnPropertySymbols(a),I=0;I<N.length;I++){var O=N[I],j=Object.getOwnPropertyDescriptor(a,O);(!j||j.enumerable||u)&&(h[O]=s(a[O],o-1),j.enumerable||Object.defineProperty(h,O,{enumerable:!1}))}if(u)for(var A=Object.getOwnPropertyNames(a),I=0;I<A.length;I++){var T=A[I],j=Object.getOwnPropertyDescriptor(a,T);j&&j.enumerable||(h[T]=s(a[T],o-1),Object.defineProperty(h,T,{enumerable:!1}))}return h}"object"===("undefined"==typeof l?"undefined":n(l))&&(o=l.depth,r=l.prototype,u=l.includeNonEnumerable,l=l.circular);var m=[],p=[],g="undefined"!=typeof e;return"undefined"==typeof l&&(l=!0),"undefined"==typeof o&&(o=1/0),s(a,o)}function a(e){return Object.prototype.toString.call(e)}function l(e){return"object"===("undefined"==typeof e?"undefined":n(e))&&"[object Date]"===a(e)}function o(e){return"object"===("undefined"==typeof e?"undefined":n(e))&&"[object Array]"===a(e)}function r(e){return"object"===("undefined"==typeof e?"undefined":n(e))&&"[object RegExp]"===a(e)}function i(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}var c;try{c=Map}catch(u){c=function(){}}var d;try{d=Set}catch(u){d=function(){}}var f;try{f=Promise}catch(u){f=function(){}}return t.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},t.__objToStr=a,t.__isDate=l,t.__isArray=o,t.__isRegExp=r,t.__getRegExpFlags=i,t}();"object"===n(t)&&t.exports&&(t.exports=a)}).call(t,n(15).Buffer,n(279)(e))},279:function(e,t){"use strict";e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},293:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(143),o=a(l),r=n(144),i=a(r);t["default"]={mangaInfo:o["default"],pageInfo:i["default"]}},294:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Icon=t.Button=t.Row=void 0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o=n(21),r=a(o),i=function(e){var t=e.color,n=e.size,a=e["float"],o=Boolean(e.disabled),i=Boolean(e.active),c="btn",u={};return c+=t?" btn-"+t:"",c+=n?" btn-"+n:"",c+=a?" float-"+a:"",c+=i?" active":"",Object.keys(e).map(function(t){"color"!==t&&"size"!==t&&"float"!==t&&"active"!==t&&"disabled"!==t&&(u[t]=e[t])}),o===!0&&(u.disabled=!0),r["default"].createElement("button",l({className:c},u))},c=function(e){var t=e.fw,n=e.name,a="fa fa-"+n;return a=Boolean(t)?a+" fa-fw":a+"",r["default"].createElement("span",{className:a})},u=function(e){return r["default"].createElement("div",l({className:"row"},e))};t.Row=u,t.Button=i,t.Icon=c},295:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function l(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),d=n(21),f=a(d),s=n(54),m=n(33),p=n(293),g=a(p),h=n(48),v=a(h),b=n(294),E=n(297),y=a(E),x=function(e){function t(e){o(this,t);var n=r(this,Object.getPrototypeOf(t).call(this,e));return n.handleClickSetCover=n.handleClickSetCover.bind(n),n.handleClickRemovePage=n.handleClickRemovePage.bind(n),n.handleClickMoveToNextPage=n.handleClickMoveToNextPage.bind(n),n.handleClickMoveToPreviousPage=n.handleClickMoveToPreviousPage.bind(n),n.handleClickChangePangeIndex=n.handleClickChangePangeIndex.bind(n),n.handleClickCutPage=n.handleClickCutPage.bind(n),n}return i(t,e),u(t,[{key:"render",value:function(){var e=this.props;return f["default"].createElement("div",{className:"card",style:{marginTop:20,background:"#f6f6f6"}},f["default"].createElement("img",{src:e.src,style:{alignSelf:"center"},className:"card-img-top",height:"210",width:"140"}),f["default"].createElement("div",{className:"card-block",style:{borderTop:"1px solid rgba(0,0,0,.125)",background:"#fff"}},f["default"].createElement("div",{className:"btn-toolbar"},f["default"].createElement("div",{className:"btn-group"},f["default"].createElement(b.Button,c({color:"secondary",size:"sm"},0===e.index?{disabled:"true"}:{onClick:this.handleClickSetCover}),f["default"].createElement(b.Icon,{name:"book"})),f["default"].createElement(b.Button,{color:"secondary",size:"sm",onClick:this.handleClickCutPage},f["default"].createElement(b.Icon,{name:"cut"})),f["default"].createElement(b.Button,{color:"secondary",size:"sm",onClick:this.handleClickRemovePage},f["default"].createElement(b.Icon,{name:"times"})))," ",f["default"].createElement("div",{className:"btn-group"},f["default"].createElement(b.Button,c({color:"secondary",size:"sm"},0===e.index?{disabled:"true"}:{onClick:this.handleClickMoveToPreviousPage}),f["default"].createElement(b.Icon,{name:"angle-left"})),f["default"].createElement(b.Button,{color:"secondary",size:"sm",onClick:this.handleClickMoveToNextPage},f["default"].createElement(b.Icon,{name:"angle-right"}))))),f["default"].createElement("div",{className:"card-footer text-center",onClick:this.handleClickChangePangeIndex},f["default"].createElement("div",{className:"card-text text-muted",style:{cursor:"default"}},0===e.index?"Cover":e.index+1)))}},{key:"handleClickSetCover",value:function(){var e=this.props,t=e.Action,n=e.index;t.setCover(n)}},{key:"handleClickRemovePage",value:function(){var e=this.props,t=e.Action,n=e.index;t.removePage(n)}},{key:"handleClickMoveToNextPage",value:function(){var e=this.props,t=e.Action,n=e.index;t.moveToNextPage(n)}},{key:"handleClickMoveToPreviousPage",value:function(){var e=this.props,t=e.Action,n=e.index;t.moveToPreviousPage(n)}},{key:"handleClickCutPage",value:function(){var e=this.props,t=e.Action,n=e.index;t.cutPage(n)}},{key:"handleClickChangePangeIndex",value:function(){var e=this.props,t=e.Action,n=e.index,a=Number(prompt("New Index (number only) :"));!isNaN(a)&&a>0&&t.changePageIndex(n,a-1)}}]),t}(d.Component),w=function(e){function t(e){o(this,t);var n=r(this,Object.getPrototypeOf(t).call(this,e));return n.state={firstUpload:!0,generating:!1},n.handleClickUploadButton=n.handleClickUploadButton.bind(n),n.handleClickGenerateButton=n.handleClickGenerateButton.bind(n),n.handleClickAddBlankPage=n.handleClickAddBlankPage.bind(n),n}return i(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=this.state;return f["default"].createElement(b.Row,null,f["default"].createElement("div",{className:"col"},f["default"].createElement("div",{className:"card card-default"},f["default"].createElement("div",{className:"card-block"},f["default"].createElement("div",{className:"card-text",style:{cursor:"default"}},f["default"].createElement(b.Button,{color:"primary",onClick:this.handleClickUploadButton,title:"update images"},f["default"].createElement(b.Icon,{name:"upload",fw:"true"}))," ",f["default"].createElement("div",{className:"btn-toolbar",style:{display:"inline-block"}},f["default"].createElement("div",{className:"btn-group"},f["default"].createElement(b.Button,c({color:"secondary"},t.firstUpload?{disabled:"true"}:{},{onClick:e.handleToggleGlobalInfoPanel,title:"edit book info"}),f["default"].createElement(b.Icon,{name:"edit",fw:"true"})),f["default"].createElement(b.Button,c({color:"secondary"},t.firstUpload?{disabled:"true"}:{},{onClick:this.handleClickAddBlankPage,title:"add blank page"}),f["default"].createElement(b.Icon,{name:"square-o",fw:"true"})),f["default"].createElement(b.Button,{color:"secondary",disabled:"true",title:"edit contents"},f["default"].createElement(b.Icon,{name:"list-ul",fw:"true"})),f["default"].createElement(b.Button,c({color:"secondary"},t.firstUpload?{disabled:"true"}:{},{onClick:e.handleToggleViewportPanel,title:"edit view setting"}),f["default"].createElement(b.Icon,{name:"eye",fw:"true"})))),t.generating?f["default"].createElement(b.Button,{color:"secondary","float":"right",disabled:"true"},f["default"].createElement("span",{className:"fa fa-spinner fa-pulse"})):f["default"].createElement(b.Button,{color:"success","float":"right",onClick:this.handleClickGenerateButton},f["default"].createElement(b.Icon,{name:"download",fw:"true"})))))))}},{key:"handleClickUploadButton",value:function(){var e=document.createElement("input"),t="image/jpeg,image/png",n=this.props.Action,a=this;e.type="file",e.multiple="multiple",e.accept=t,e.onchange=function(e){var o=[].concat(l(this.files)).filter(function(e){return t.indexOf(e.type)>-1});o.length&&(n.importPages(o),a.state.firstUpload&&a.setState({firstUpload:!1}))},e.click()}},{key:"handleClickGenerateButton",value:function(){var e=this,t=this.props.Action;new Promise(function(t){return e.setState({generating:!0},t)}).then(function(){return(0,y["default"])(e.props.State)}).then(function(){t.updateUUID(),e.setState({generating:!1})})}},{key:"handleClickAddBlankPage",value:function(){var e=Number(prompt("index: (number only)"));!isNaN(e)&&e>0&&this.props.Action.addBlankPage(e-1)}}]),t}(d.Component),P=(function(e){function t(e){return o(this,t),r(this,Object.getPrototypeOf(t).call(this,e))}return i(t,e),u(t,[{key:"render",value:function(){return f["default"].createElement(b.Row,null,f["default"].createElement("div",{className:"col-8"},f["default"].createElement("div",{className:"card"},f["default"].createElement("div",{className:"card-header"},"NCX"),f["default"].createElement("ul",{className:"list-group list-group-flush"},f["default"].createElement("li",{className:"list-group-item"},f["default"].createElement("div",{className:"row",style:{flexGrow:1}},f["default"].createElement("div",{className:"col"},f["default"].createElement("input",{type:"text",className:"form-control input-sm",placeholder:"title"})),f["default"].createElement("div",{className:"col"},f["default"].createElement("input",{type:"number",min:"1",className:"form-control input-sm",placeholder:"page num"})),f["default"].createElement("div",{className:"col",style:{display:"flex",justifyContent:"flex-end"}},f["default"].createElement(b.Button,{color:"secondary"},f["default"].createElement(b.Icon,{name:"plus"}))," ",f["default"].createElement(b.Button,{color:"secondary"},f["default"].createElement(b.Icon,{name:"minus"})))))),f["default"].createElement("div",{className:"card-footer"},f["default"].createElement(b.Button,{color:"primary"},"Save")))))}}]),t}(d.Component),function(e){function t(e){o(this,t);var n=r(this,Object.getPrototypeOf(t).call(this,e));return n.handleClickSaveButton=n.handleClickSaveButton.bind(n),n}return i(t,e),u(t,[{key:"render",value:function(){var e=this.props;return f["default"].createElement(b.Row,null,f["default"].createElement("div",{className:"col"},f["default"].createElement("div",{className:"card"},f["default"].createElement("div",{className:"card-header"},"Book Info"),f["default"].createElement("div",{className:"card-block"},f["default"].createElement(b.Row,null,f["default"].createElement("div",{className:"col"},f["default"].createElement("div",{className:"form-group row"},f["default"].createElement("label",{className:"col-2 col-form-label"},"Title"),f["default"].createElement("div",{className:"col-10"},f["default"].createElement("input",{defaultValue:e.title,ref:"g_title",className:"form-control",type:"text"})))),f["default"].createElement("div",{className:"col"},f["default"].createElement("div",{className:"form-group row"},f["default"].createElement("label",{className:"col-2 col-form-label"},"Creator"),f["default"].createElement("div",{className:"col-10"},f["default"].createElement("input",{defaultValue:e.creator,ref:"g_creator",className:"form-control",type:"text"}))))),f["default"].createElement("p",null),f["default"].createElement(b.Row,null,f["default"].createElement("div",{className:"col"},f["default"].createElement("div",{className:"form-group row"},f["default"].createElement("label",{className:"col-2 col-form-label"},"Subject"),f["default"].createElement("div",{className:"col-10"},f["default"].createElement("input",{defaultValue:e.subject,ref:"g_subject",list:"datalist_subject",className:"form-control",type:"text"}),f["default"].createElement("datalist",{id:"datalist_subject"},f["default"].createElement("option",{value:"少年"}),f["default"].createElement("option",{value:"靑年"}),f["default"].createElement("option",{value:"同人誌"}),f["default"].createElement("option",{value:"漫画"}),f["default"].createElement("option",{value:"成年コミック"}))))),f["default"].createElement("div",{className:"col"},f["default"].createElement("div",{className:"form-group row"},f["default"].createElement("label",{className:"col-2 col-form-label"},"Language"),f["default"].createElement("div",{className:"col-10"},f["default"].createElement("input",{defaultValue:e.language,ref:"g_language",list:"datalist_language",className:"form-control",type:"text"}),f["default"].createElement("datalist",{id:"datalist_language"},f["default"].createElement("option",{value:"ja"}),f["default"].createElement("option",{value:"zh-CN"}),f["default"].createElement("option",{value:"en-US"}))))))),f["default"].createElement("div",{className:"card-footer"},f["default"].createElement(b.Button,{color:"primary",onClick:this.handleClickSaveButton},"Save")))))}},{key:"handleClickSaveButton",value:function(){var e=this.refs.g_title.value,t=this.refs.g_creator.value,n=this.refs.g_subject.value,a=this.refs.g_language.value;this.props.handleSaveGlobalInfo({title:e,creator:t,subject:n,language:a})}}]),t}(d.Component)),_=function(e){function t(e){o(this,t);var n=r(this,Object.getPrototypeOf(t).call(this,e));return n.handleClickSaveButton=n.handleClickSaveButton.bind(n),n}return i(t,e),u(t,[{key:"render",value:function(){return f["default"].createElement(b.Row,null,f["default"].createElement("div",{className:"col"},f["default"].createElement("div",{className:"card"},f["default"].createElement("div",{className:"card-header"},"viewport"),f["default"].createElement("div",{className:"card-block"},f["default"].createElement(b.Row,null,f["default"].createElement("div",{className:"col"},f["default"].createElement("div",{className:"form-group row"},f["default"].createElement("label",{className:"col-2 col-form-label"},"Width (px)"),f["default"].createElement("div",{className:"col-10"},f["default"].createElement("input",{ref:"g_width",defaultValue:this.props.width,className:"form-control",type:"number"})))),f["default"].createElement("div",{className:"col"},f["default"].createElement("div",{className:"form-group row"},f["default"].createElement("label",{className:"col-2 col-form-label"},"Height (px)"),f["default"].createElement("div",{className:"col-10"},f["default"].createElement("input",{ref:"g_height",defaultValue:this.props.height,className:"form-control",type:"number"})))))),f["default"].createElement("div",{className:"card-footer"},f["default"].createElement(b.Button,{color:"primary",onClick:this.handleClickSaveButton},"Save")))))}},{key:"handleClickSaveButton",value:function(){var e=Number(this.refs.g_height.value),t=Number(this.refs.g_width.value);this.props.handleSaveViewportInfo({height:e,width:t})}}]),t}(d.Component),I=function(e){function t(e){o(this,t);var n=r(this,Object.getPrototypeOf(t).call(this,e));return n.state={showBookInfoPanel:!1,showViewportPanel:!1,showNCXPanel:!1},n.handleToggleGlobalInfoPanel=n.handleToggleGlobalInfoPanel.bind(n),n.handleSaveGlobalInfo=n.handleSaveGlobalInfo.bind(n),n.handleToggleViewportPanel=n.handleToggleViewportPanel.bind(n),n.handleSaveViewportInfo=n.handleSaveViewportInfo.bind(n),n}return i(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.Action,n=e.State,a=Math.ceil(n.pageInfo.list.length/5),l=5-n.pageInfo.list.length%5,o=0,r=[],i=[],u=n.pageInfo.list.length-1;return l=5===l?0:l,n.pageInfo.list.map(function(e,n){if(i.push(f["default"].createElement(x,{key:a+"-"+o,src:v["default"].getObjectURL(e),index:n,Action:t})),n===u)for(o=4;l-- >0;)i.push(f["default"].createElement("div",{style:{marginTop:20},className:"card",key:"blank-"+l}));o<4?o++:(r.push(f["default"].createElement(b.Row,{key:"row-"+a},f["default"].createElement("div",{className:"col"},f["default"].createElement("div",{className:"card-group"},i)))),i=[],a--,o=0)}),f["default"].createElement("div",null,f["default"].createElement("nav",{className:"navbar navbar-light bg-faded"},f["default"].createElement("h3",{className:"navbar-brand",href:""},"Epub Manga Creator  ",f["default"].createElement("iframe",{style:{border:"none"},src:"https://ghbtns.com/github-btn.html?user=wing-kai&repo=epub-manga-creator&type=star&count=true",frameBorder:"0",scrolling:"0",width:"170px",height:"20px"}))),f["default"].createElement("p",null),f["default"].createElement("div",{className:"container"},f["default"].createElement(w,{Action:t,State:n,handleToggleGlobalInfoPanel:this.handleToggleGlobalInfoPanel,handleToggleViewportPanel:this.handleToggleViewportPanel}),f["default"].createElement("p",null),this.state.showViewportPanel?[f["default"].createElement(_,c({key:"EditViewportPanel",handleSaveViewportInfo:this.handleSaveViewportInfo},n.pageInfo.viewport)),f["default"].createElement("p",{key:"p"})]:void 0,this.state.showBookInfoPanel?[f["default"].createElement(P,c({key:"EditBookInfoPanel",handleSaveGlobalInfo:this.handleSaveGlobalInfo},n.mangaInfo.global)),f["default"].createElement("p",{key:"p"})]:void 0,f["default"].createElement(b.Row,null,f["default"].createElement("div",{className:"col"},f["default"].createElement("div",{className:"card card-default"},f["default"].createElement("div",{className:"card-header"},"Pages"),f["default"].createElement("div",{className:"card-block",style:{paddingTop:0}},r)))),f["default"].createElement("p",null),f["default"].createElement("p",null," ")))}},{key:"handleToggleGlobalInfoPanel",value:function(){this.setState({showBookInfoPanel:!this.state.showBookInfoPanel,showViewportPanel:!1})}},{key:"handleToggleViewportPanel",value:function(){this.setState({showBookInfoPanel:!1,showViewportPanel:!this.state.showViewportPanel})}},{key:"handleSaveGlobalInfo",value:function(e){this.setState({showBookInfoPanel:!1}),this.props.Action.saveGlobalSetting(e)}},{key:"handleSaveViewportInfo",value:function(e){this.setState({showViewportPanel:!1}),this.props.Action.saveViewportSetting(e)}}]),t}(d.Component);t["default"]=(0,s.connect)(function(e){var t=e.mangaInfo,n=e.pageInfo;return{State:{mangaInfo:t,pageInfo:n}}},function(e){return{Action:(0,m.bindActionCreators)(c({},g["default"].pageInfo,g["default"].mangaInfo),e)}})(I)},296:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(33),o=n(134),r=a(o),i=n(299),c=a(i),u={},d=(0,l.compose)((0,l.applyMiddleware)(r["default"]),window.devToolsExtension?window.devToolsExtension({serialize:function(e,t){return"Symbol"==typeof t?String(t):t}}):function(e){return e})(l.createStore),f=d(c["default"],u);t["default"]=f},297:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(38),o=a(l),r=n(48),i=a(r),c=n(302),u=a(c),d=function(e){var t=new o["default"];t.folder("META-INF"),t.folder("OPS/css"),t.folder("OPS/images"),t.folder("OPS/xhtml");var n=u["default"]["toc.ncx"],a=e.mangaInfo.ncx.map(function(e,t){return'<ncx:navPoint id="p'+e.pageNum+'" playOrder="'+(t+1)+'"><ncx:navLabel><ncx:text>'+e.text+'</ncx:text></ncx:navLabel><ncx:content src="p'+e.pageNum+'.xhtml"/></ncx:navPoint>'}).join("");n=n.replace(new RegExp("{{uuid}}","gm"),e.mangaInfo.global.uuid).replace(new RegExp("{{title}}","gm"),e.mangaInfo.global.title).replace(new RegExp("{{creator}}","gm"),e.mangaInfo.global.creator).replace(new RegExp("<!-- nav map -->","gm"),a);var l=u["default"]["toc.xhtml"],r=e.mangaInfo.ncx.map(function(e,t){return'<li epub:type="chapter" id="toc-'+(t+1)+'"><a href="p'+e.pageNum+'.xhtml">'+e.text+"</a></li>"}).join(""),c='<li><a href="p1.xhtml">1</a></li>'+e.pageInfo.list.map(function(e,t){return'<li><a href="p'+(t+1)+'.xhtml">'+(t+2)+"</a></li>"}).join("");l=l.replace(new RegExp("{{title}}","gm"),e.mangaInfo.global.title).replace(new RegExp("{{ncxTitle}}","gm"),e.mangaInfo.ncxTitle).replace(new RegExp("<!-- toc -->","gm"),r).replace(new RegExp("<!-- page list -->","gm"),c);var d=u["default"]["package.opf"],f=e.pageInfo.list.map(function(e,t){var n=i["default"].getBlobObject(e),a=String(n.type),l='<item id="j'+(t+1)+'" href="images/'+(t+1)+"."+a.slice(6)+'" media-type="'+a+'"/>';return 0===t&&(l='<item id="cover" href="images/1.'+a.slice(6)+'" media-type="'+a+'"/>'+l),l}).join(""),s=e.pageInfo.list.map(function(e,t){return'<item id="p'+(t+1)+'" href="xhtml/p'+(t+1)+'.xhtml" media-type="application/xhtml+xml"/>'}).join(""),m="right",p=e.pageInfo.list.map(function(e,t){return m="left"===m?"right":"left",'<itemref idref="p'+(t+1)+'" properties="page-spread-'+m+'" />'}).join("");d=d.replace(new RegExp("{{uuid}}","gm"),e.mangaInfo.global.uuid).replace(new RegExp("{{title}}","gm"),e.mangaInfo.global.title).replace(new RegExp("{{language}}","gm"),e.mangaInfo.global.language).replace(new RegExp("{{creator}}","gm"),e.mangaInfo.global.creator).replace(new RegExp("{{subject}}","gm"),e.mangaInfo.global.subject).replace(new RegExp("{{createTime}}","gm"),(new Date).toISOString()).replace(new RegExp("<!-- image item -->","gm"),f).replace(new RegExp("<!-- page.xhtml item -->","gm"),s).replace(new RegExp("<!-- image item ref -->","gm"),p);var g={};return e.pageInfo.list.map(function(t,n){g["p"+(n+1)+".xhtml"]=u["default"]["page.xhtml"].replace("{{language}}",e.mangaInfo.global.language).replace("{{title}}",e.mangaInfo.global.title).replace("{{viewport}}","width="+e.pageInfo.viewport.width+",height="+e.pageInfo.viewport.height).replace("{{image file src}}","../images/"+(n+1)+"."+String(i["default"].getBlobObject(t).type).slice(6))}),t.file("mimetype",u["default"].mimetype),t.file("META-INF/container.xml",u["default"]["container.xml"]),t.file("OPS/css/default.css",u["default"]["default.css"]),t.file("OPS/css/en.css",u["default"]["en.css"]),t.file("OPS/css/ja-jp.css",u["default"]["ja-jp.css"]),t.file("OPS/xhtml/toc.ncx",n),t.file("OPS/xhtml/toc.xhtml",l),t.file("OPS/package.opf",d),e.pageInfo.list.map(function(e,n){var a=i["default"].getBlobObject(e);t.file("OPS/images/"+(n+1)+"."+String(a.type).slice(6),a)}),Object.keys(g).map(function(e){t.file("OPS/xhtml/"+e,g[e])}),new Promise(function(n){t.generateAsync({type:"blob",mimeType:"application/epub+zip"}).then(function(t){var a=document.createElement("a"),l=window.URL.createObjectURL(t);a.download=e.mangaInfo.global.title.trim()+".epub",a.href=l,a.click(),window.URL.revokeObjectURL(l),n()})})};t["default"]=d},298:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}var l=n(21),o=a(l),r=n(98),i=a(r),c=n(54),u=n(296),d=a(u),f=n(295),s=a(f),m=document.getElementById("body"),p=o["default"].createElement(c.Provider,{store:d["default"]},o["default"].createElement(s["default"],null));i["default"].render(p,m)},299:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(33),o=n(301),r=a(o),i=n(300),c=a(i),u=(0,l.combineReducers)({pageInfo:r["default"],mangaInfo:c["default"]});t["default"]=u},300:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var o,r=n(145),i=a(r),c=n(143),u=function(){for(var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",t="",n=36;n-- >0;)t+=27===n||22===n||17===n||12===n?"-":String(e[Math.ceil(35*Math.random())]);return t},d={global:{uuid:u(),title:"",creator:"",subject:"",language:""},ncxTitle:"目次/Table of Contents",ncx:[{pageNum:1,text:"表紙"}]},f=(o={},l(o,c.ActionType.UPDATE_UUID,function(e){return e.global.uuid=u(),e}),l(o,c.ActionType.SAVE_GLOBAL_SETTING,function(e,t){var n=t.data;return e.global=n,e}),l(o,c.ActionType.SAVE_NCX_SETTING,function(e,t){var n=t.data;return e.ncx=n,e}),o);t["default"]=(0,i["default"])(d,f)},301:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(145),c=a(i),u=n(144),d=n(48),f=a(d),s={firstBlankPage:!0,viewport:{height:1500,width:1058},list:[]},m=(r={},l(r,u.ActionType.IMPORT_PAGES,function(e,t){var n=t.newFileIndexList;return e.list=[].concat(o(e.list),o(n)),e}),l(r,u.ActionType.SET_COVER_PAGE,function(e,t){var n=t.index,a=e.list.splice(n,1);return e.list.unshift(a),e}),l(r,u.ActionType.REMOVE_PAGE,function(e,t){var n=t.index,a=e.list.splice(n,1);return f["default"].removeBlob(a),e}),l(r,u.ActionType.MOVE_TO_NEXT_PAGE,function(e,t){var n=t.index,a=n+1===e.list.length?n:n+1,l=e.list[n],o=e.list[a];return e.list[n]=o,e.list[a]=l,e}),l(r,u.ActionType.MOVE_TO_PREVIOUS_PAGE,function(e,t){var n=t.index,a=n-1<0?0:n-1,l=e.list[n],o=e.list[a];return e.list[n]=o,e.list[a]=l,e}),l(r,u.ActionType.CHANGE_PAGE_INDEX,function(e,t){var n=t.originIndex,a=t.newIndex,l=e.list[n],o=e.list[a];return n<a&&(e.list.splice(a,1,o,l),e.list.splice(n,1)),n>a&&(e.list.splice(n,1),e.list.splice(a,1,l,o)),e}),l(r,u.ActionType.CUT_PAGE,function(e,t){var n=t.index,a=t.newBlobIndex,l=e.list[n];return e.list.splice(n,1,l,a),e}),l(r,u.ActionType.ADD_BLANK_PAGE,function(e,t){var n=t.index,a=t.newBlobIndex,l=e.list[n];return e.list.splice(n,1,a,l),e}),l(r,u.ActionType.SAVE_VIEWPORT_SETTING,function(e,t){var n=t.data;return e.viewport=n,
e}),r);t["default"]=(0,c["default"])(s,m)},302:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={"container.xml":'<?xml version="1.0" encoding="UTF-8"?><container xmlns="urn:oasis:names:tc:opendocument:xmlns:container" version="1.0"><rootfiles><rootfile full-path="OPS/package.opf" media-type="application/oebps-package+xml"/></rootfiles></container>',mimetype:"application/epub+zip","toc.xhtml":'<?xml version="1.0" encoding="UTF-8"?><html><head><title>{{title}}</title><link href="../css/default.css" rel="stylesheet" type="text/css" /></head><body epub:type="frontmatter"><header><h1>{{ncxTitle}}</h1></header><nav epub:type="toc" id="toc"><ol>  <!-- toc --></ol></nav><nav epub:type="page-list"><ol><!-- page list --></ol></nav></body></html>',"toc.ncx":'<?xml version="1.0" encoding="utf-8" standalone="no"?><ncx:ncx xmlns:ncx="http://www.daisy.org/z3986/2005/ncx/" version="2005-1"><ncx:head><ncx:meta name="dtb:uid" content="urn:uuid:{{uuid}}"/><ncx:meta name="dtb:depth" content="-1"/><ncx:meta name="dtb:totalPageCount" content="0"/><ncx:meta name="dtb:maxPageNumber" content="0"/></ncx:head><ncx:docTitle><ncx:text>{{title}}</ncx:text></ncx:docTitle><ncx:docAuthor><ncx:text>{{creator}}</ncx:text></ncx:docAuthor><ncx:navMap><!-- nav map --></ncx:navMap></ncx:ncx>',"page.xhtml":'<?xml version="1.0" encoding="utf-8"?><html xml:lang="{{language}}" xmlns="http://www.w3.org/1999/xhtml" xmlns:xml="http://www.w3.org/XML/1998/namespace" xmlns:epub="http://www.idpf.org/2007/ops"><head><title>{{title}}</title><meta name="viewport" content="{{viewport}}"/><style>html,body,img{width:100%;height:100%;margin:0;padding:0;}</style></head><body epub:type="bodymatter"><img src="{{image file src}}"/></body></html>',"package.opf":'<?xml version="1.0" encoding="UTF-8"?><package xmlns="http://www.idpf.org/2007/opf" version="3.0" xml:lang="{{language}}" prefix="rendition: http://www.idpf.org/vocab/rendition/#" unique-identifier="ootuya-id"><metadata xmlns:opf="http://www.idpf.org/2007/opf" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:dcterms="http://purl.org/dc/terms/"><dc:identifier id="ootuya-id">urn:uuid:{{uuid}}</dc:identifier><dc:title>{{title}}</dc:title><dc:language>{{language}}</dc:language><dc:subject>{{subject}}</dc:subject><dc:creator>{{creator}}</dc:creator><meta property="dcterms:modified">{{createTime}}</meta><meta property="rendition:layout">pre-paginated</meta><meta property="rendition:orientation">portrait</meta><meta property="rendition:spread">landscape</meta></metadata><manifest><item id="default-style" href="css/default.css" media-type="text/css"/><item id="en-style" href="css/en.css" media-type="text/css"/><item id="ja-jp-style" href="css/ja-jp.css" media-type="text/css"/><!-- image item --><item id="toc" properties="nav" href="xhtml/toc.xhtml" media-type="application/xhtml+xml"/><!-- page.xhtml item --><item id="ncxtoc" href="xhtml/toc.ncx" media-type="application/x-dtbncx+xml"/></manifest><spine toc="ncxtoc" page-progression-direction="rtl"><!-- image item ref --></spine></package>',"default.css":'@charset "utf-8";ol{list-style-type:none}a{text-decoration:none}a:hover{text-decoration:underline}body{font-size:14pt;font-family:"KozMinPr6N-Medium","HiraMinProN-W3","ＭＳ 明朝",serif,sans-serif;margin:auto 1em;padding:1em 0;max-height:28em;background-color:#fff4e7}',"en.css":"h1.ja-jp,h2.ja-jp,h3.ja-jp,p.ja-jp,dt.ja-jp,dd.ja-jp{display:none}","ja-jp.css":"h1.en,h2.en,h3.en,p.en,dt.en,dd.en{display:none}"};t["default"]=n}});